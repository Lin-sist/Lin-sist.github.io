<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>Day07-13åˆ°19ã€Šè´­ç‰©è½¦åŠŸèƒ½ã€‹ | Linè¯´</title><meta name="author" content="Lin"><meta name="copyright" content="Lin"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="å¥½çš„ï¼æˆ‘æ¥ç»™ä½ åšä¸€ä»½å®Œæ•´çš„å­¦ä¹ æ€»ç»“ï¼Œæ–¹ä¾¿ä½ å¤ä¹ å’Œåç»­æ·±å…¥ã€‚  ğŸ“š è‹ç©¹å¤–å– - å­¦ä¹ ç¬”è®°æ€»ç»“ ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼“å­˜æ¨¡å—1.1 ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ12345678910111213flowchart LR    subgraph æ— ç¼“å­˜        A1[ç”¨æˆ·è¯·æ±‚] --&gt; B1[(MySQL)]        B1 --&gt; C1[å“åº” ~50ms]    end        subgra">
<meta property="og:type" content="article">
<meta property="og:title" content="Day07-13åˆ°19ã€Šè´­ç‰©è½¦åŠŸèƒ½ã€‹">
<meta property="og:url" content="https://lin-sist.github.io/2026/01/29/Day07%E6%80%BB%E7%BB%93/index.html">
<meta property="og:site_name" content="Linè¯´">
<meta property="og:description" content="å¥½çš„ï¼æˆ‘æ¥ç»™ä½ åšä¸€ä»½å®Œæ•´çš„å­¦ä¹ æ€»ç»“ï¼Œæ–¹ä¾¿ä½ å¤ä¹ å’Œåç»­æ·±å…¥ã€‚  ğŸ“š è‹ç©¹å¤–å– - å­¦ä¹ ç¬”è®°æ€»ç»“ ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼“å­˜æ¨¡å—1.1 ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ12345678910111213flowchart LR    subgraph æ— ç¼“å­˜        A1[ç”¨æˆ·è¯·æ±‚] --&gt; B1[(MySQL)]        B1 --&gt; C1[å“åº” ~50ms]    end        subgra">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://lin-sist.github.io/img/Lin.jpg">
<meta property="article:published_time" content="2026-01-28T16:00:00.000Z">
<meta property="article:modified_time" content="2026-01-30T14:25:19.979Z">
<meta property="article:author" content="Lin">
<meta property="article:tag" content="ä¸€åˆ·è‹ç©¹å¤–å–">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://lin-sist.github.io/img/Lin.jpg"><script type="application/ld+json">{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Day07-13åˆ°19ã€Šè´­ç‰©è½¦åŠŸèƒ½ã€‹",
  "url": "https://lin-sist.github.io/2026/01/29/Day07%E6%80%BB%E7%BB%93/",
  "image": "https://lin-sist.github.io/img/Lin.jpg",
  "datePublished": "2026-01-28T16:00:00.000Z",
  "dateModified": "2026-01-30T14:25:19.979Z",
  "author": [
    {
      "@type": "Person",
      "name": "Lin",
      "url": "https://Lin-sist.github.io"
    }
  ]
}</script><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://lin-sist.github.io/2026/01/29/Day07%E6%80%BB%E7%BB%93/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css"><script>
    (() => {
      
    const saveToLocal = {
      set: (key, value, ttl) => {
        if (!ttl) return
        const expiry = Date.now() + ttl * 86400000
        localStorage.setItem(key, JSON.stringify({ value, expiry }))
      },
      get: key => {
        const itemStr = localStorage.getItem(key)
        if (!itemStr) return undefined
        const { value, expiry } = JSON.parse(itemStr)
        if (Date.now() > expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return value
      }
    }

    window.btf = {
      saveToLocal,
      getScript: (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        Object.entries(attr).forEach(([key, val]) => script.setAttribute(key, val))
        script.onload = script.onreadystatechange = () => {
          if (!script.readyState || /loaded|complete/.test(script.readyState)) resolve()
        }
        script.onerror = reject
        document.head.appendChild(script)
      }),
      getCSS: (url, id) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onload = link.onreadystatechange = () => {
          if (!link.readyState || /loaded|complete/.test(link.readyState)) resolve()
        }
        link.onerror = reject
        document.head.appendChild(link)
      }),
      addGlobalFn: (key, fn, name = false, parent = window) => {
        if (!false && key.startsWith('pjax')) return
        const globalFn = parent.globalFn || {}
        globalFn[key] = globalFn[key] || {}
        globalFn[key][name || Object.keys(globalFn[key]).length] = fn
        parent.globalFn = globalFn
      }
    }
  
      
      const activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      const activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }

      btf.activateDarkMode = activateDarkMode
      btf.activateLightMode = activateLightMode

      const theme = saveToLocal.get('theme')
    
          theme === 'dark' ? activateDarkMode() : theme === 'light' ? activateLightMode() : null
        
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        document.documentElement.classList.toggle('hide-aside', asideStatus === 'hide')
      }
    
      
    const detectApple = () => {
      if (/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)) {
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
  
    })()
  </script><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false,"highlightFullpage":false,"highlightMacStyle":false},
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶å¤±è´¥',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'åˆšåˆš',
    min: 'åˆ†é’Ÿå‰',
    hour: 'å°æ—¶å‰',
    day: 'å¤©å‰',
    month: 'ä¸ªæœˆå‰'
  },
  copyright: undefined,
  lightbox: 'null',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid/dist/infinitegrid.min.js',
    buttonText: 'åŠ è½½æ›´å¤š'
  },
  isPhotoFigcaption: false,
  islazyloadPlugin: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Day07-13åˆ°19ã€Šè´­ç‰©è½¦åŠŸèƒ½ã€‹',
  isHighlightShrink: false,
  isToc: true,
  pageType: 'post'
}</script><meta name="generator" content="Hexo 7.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img text-center"><img src="/img/Lin.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data text-center"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">3</div></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></li></ul></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url(/img/YourName.jpg);"><nav id="nav"><span id="blog-info"><a class="nav-site-title" href="/"><span class="site-name">Linè¯´</span></a><a class="nav-page-title" href="/"><span class="site-name">Day07-13åˆ°19ã€Šè´­ç‰©è½¦åŠŸèƒ½ã€‹</span><span class="site-name"><i class="fa-solid fa-circle-arrow-left"></i><span>  è¿”å›é¦–é¡µ</span></span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> æ—¶é—´è½´</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><span class="site-page group"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></span><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> éŸ³ä¹</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li><li><a class="site-page child" href="/about/"><i class="fa-fw fas fa-heart"></i><span> å…³äº</span></a></li></ul></div></div><div id="toggle-menu"><span class="site-page"><i class="fas fa-bars fa-fw"></i></span></div></div></nav><div id="post-info"><h1 class="post-title">Day07-13åˆ°19ã€Šè´­ç‰©è½¦åŠŸèƒ½ã€‹</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">å‘è¡¨äº</span><time class="post-meta-date-created" datetime="2026-01-28T16:00:00.000Z" title="å‘è¡¨äº 2026-01-29 00:00:00">2026-01-29</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">æ›´æ–°äº</span><time class="post-meta-date-updated" datetime="2026-01-30T14:25:19.979Z" title="æ›´æ–°äº 2026-01-30 22:25:19">2026-01-30</time></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title=""><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">æµè§ˆé‡:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="container post-content" id="article-container"><p>å¥½çš„ï¼æˆ‘æ¥ç»™ä½ åšä¸€ä»½å®Œæ•´çš„å­¦ä¹ æ€»ç»“ï¼Œæ–¹ä¾¿ä½ å¤ä¹ å’Œåç»­æ·±å…¥ã€‚</p>
<hr>
<h1 id="ğŸ“š-è‹ç©¹å¤–å–-å­¦ä¹ ç¬”è®°æ€»ç»“"><a href="#ğŸ“š-è‹ç©¹å¤–å–-å­¦ä¹ ç¬”è®°æ€»ç»“" class="headerlink" title="ğŸ“š è‹ç©¹å¤–å– - å­¦ä¹ ç¬”è®°æ€»ç»“"></a>ğŸ“š è‹ç©¹å¤–å– - å­¦ä¹ ç¬”è®°æ€»ç»“</h1><hr>
<h1 id="ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼“å­˜æ¨¡å—"><a href="#ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼“å­˜æ¨¡å—" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼“å­˜æ¨¡å—"></a>ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼“å­˜æ¨¡å—</h1><h2 id="1-1-ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ"><a href="#1-1-ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ" class="headerlink" title="1.1 ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ"></a>1.1 ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">flowchart LR</span><br><span class="line">    subgraph æ— ç¼“å­˜</span><br><span class="line">        A1[ç”¨æˆ·è¯·æ±‚] --&gt; B1[(MySQL)]</span><br><span class="line">        B1 --&gt; C1[å“åº” ~50ms]</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    subgraph æœ‰ç¼“å­˜</span><br><span class="line">        A2[ç”¨æˆ·è¯·æ±‚] --&gt; D&#123;Redisæœ‰æ•°æ®?&#125;</span><br><span class="line">        D --&gt;|å‘½ä¸­| E[å“åº” ~5ms âš¡]</span><br><span class="line">        D --&gt;|æœªå‘½ä¸­| F[(MySQL)]</span><br><span class="line">        F --&gt; G[å†™å…¥Redis]</span><br><span class="line">        G --&gt; E</span><br><span class="line">    end</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>å¯¹æ¯”é¡¹</th>
<th>æ— ç¼“å­˜</th>
<th>æœ‰ç¼“å­˜</th>
</tr>
</thead>
<tbody><tr>
<td>å“åº”é€Ÿåº¦</td>
<td>æ…¢ï¼ˆ50-100msï¼‰</td>
<td>å¿«ï¼ˆ1-10msï¼‰</td>
</tr>
<tr>
<td>æ•°æ®åº“å‹åŠ›</td>
<td>é«˜</td>
<td>ä½</td>
</tr>
<tr>
<td>é€‚ç”¨åœºæ™¯</td>
<td>ä½å¹¶å‘</td>
<td>é«˜å¹¶å‘è¯»å¤šå†™å°‘</td>
</tr>
</tbody></table>
<hr>
<h2 id="1-2-æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨æ“ä½œ-RedisTemplateï¼ˆèœå“æ¨¡å—ï¼‰"><a href="#1-2-æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨æ“ä½œ-RedisTemplateï¼ˆèœå“æ¨¡å—ï¼‰" class="headerlink" title="1.2 æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨æ“ä½œ RedisTemplateï¼ˆèœå“æ¨¡å—ï¼‰"></a>1.2 æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨æ“ä½œ RedisTemplateï¼ˆèœå“æ¨¡å—ï¼‰</h2><h3 id="ğŸ“-ä»£ç ä½ç½®"><a href="#ğŸ“-ä»£ç ä½ç½®" class="headerlink" title="ğŸ“ ä»£ç ä½ç½®"></a>ğŸ“ ä»£ç ä½ç½®</h3><ul>
<li>user&#x2F;DishController.java - ç”¨æˆ·ç«¯æŸ¥è¯¢</li>
<li>admin&#x2F;DishController.java - ç®¡ç†ç«¯æ¸…é™¤ç¼“å­˜</li>
</ul>
<h3 id="ğŸ“‹-æ ¸å¿ƒé€»è¾‘"><a href="#ğŸ“‹-æ ¸å¿ƒé€»è¾‘" class="headerlink" title="ğŸ“‹ æ ¸å¿ƒé€»è¾‘"></a>ğŸ“‹ æ ¸å¿ƒé€»è¾‘</h3><p><strong>æŸ¥è¯¢æµç¨‹ï¼ˆç”¨æˆ·ç«¯ï¼‰</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Step 1: æ„é€ Key â†’ &quot;dish_&quot; + categoryId</span><br><span class="line">Step 2: æŸ¥è¯¢Redis â†’ redisTemplate.opsForValue().get(key)</span><br><span class="line">Step 3: åˆ¤æ–­æ˜¯å¦å‘½ä¸­ â†’ list != null &amp;&amp; list.size() &gt; 0</span><br><span class="line">Step 4a: å‘½ä¸­ â†’ ç›´æ¥è¿”å›</span><br><span class="line">Step 4b: æœªå‘½ä¸­ â†’ æŸ¥æ•°æ®åº“ â†’ å­˜å…¥Redis â†’ è¿”å›</span><br></pre></td></tr></table></figure>

<p><strong>æ¸…é™¤ç¼“å­˜ï¼ˆç®¡ç†ç«¯ï¼‰</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">æ–°å¢èœå“ â†’ æ¸…é™¤è¯¥åˆ†ç±»ç¼“å­˜ â†’ clearCache(&quot;dish_&quot; + categoryId)</span><br><span class="line">ä¿®æ”¹/åˆ é™¤/èµ·åœå”® â†’ æ¸…é™¤æ‰€æœ‰èœå“ç¼“å­˜ â†’ clearCache(&quot;dish_*&quot;)</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ’»-å…³é”®ä»£ç ç‰‡æ®µ"><a href="#ğŸ’»-å…³é”®ä»£ç ç‰‡æ®µ" class="headerlink" title="ğŸ’» å…³é”®ä»£ç ç‰‡æ®µ"></a>ğŸ’» å…³é”®ä»£ç ç‰‡æ®µ</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æŸ¥è¯¢ç¼“å­˜</span></span><br><span class="line">List&lt;DishVO&gt; list = (List&lt;DishVO&gt;) redisTemplate.opsForValue().get(key);</span><br><span class="line"></span><br><span class="line"><span class="comment">// å­˜å…¥ç¼“å­˜</span></span><br><span class="line">redisTemplate.opsForValue().set(key, list);</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ¸…é™¤ç¼“å­˜ï¼ˆæ”¯æŒé€šé…ç¬¦ï¼‰</span></span><br><span class="line"><span class="type">Set</span> <span class="variable">keys</span> <span class="operator">=</span> redisTemplate.keys(pattern);</span><br><span class="line">redisTemplate.delete(keys);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-3-æ–¹å¼äºŒï¼šSpring-Cache-æ³¨è§£ï¼ˆå¥—é¤æ¨¡å—ï¼‰"><a href="#1-3-æ–¹å¼äºŒï¼šSpring-Cache-æ³¨è§£ï¼ˆå¥—é¤æ¨¡å—ï¼‰" class="headerlink" title="1.3 æ–¹å¼äºŒï¼šSpring Cache æ³¨è§£ï¼ˆå¥—é¤æ¨¡å—ï¼‰"></a>1.3 æ–¹å¼äºŒï¼šSpring Cache æ³¨è§£ï¼ˆå¥—é¤æ¨¡å—ï¼‰</h2><h3 id="ğŸ“-ä»£ç ä½ç½®-1"><a href="#ğŸ“-ä»£ç ä½ç½®-1" class="headerlink" title="ğŸ“ ä»£ç ä½ç½®"></a>ğŸ“ ä»£ç ä½ç½®</h3><ul>
<li>SkyApplication.java - <code>@EnableCaching</code> å¼€å¯ç¼“å­˜</li>
<li>user&#x2F;SetmealController.java - <code>@Cacheable</code></li>
<li>admin&#x2F;SetmealController.java - <code>@CacheEvict</code></li>
</ul>
<h3 id="ğŸ“‹-ä¸‰å¤§æ ¸å¿ƒæ³¨è§£"><a href="#ğŸ“‹-ä¸‰å¤§æ ¸å¿ƒæ³¨è§£" class="headerlink" title="ğŸ“‹ ä¸‰å¤§æ ¸å¿ƒæ³¨è§£"></a>ğŸ“‹ ä¸‰å¤§æ ¸å¿ƒæ³¨è§£</h3><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
<th>ä½¿ç”¨åœºæ™¯</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><code>@EnableCaching</code></td>
<td>å¼€å¯ç¼“å­˜åŠŸèƒ½</td>
<td>å¯åŠ¨ç±»</td>
<td>åªåŠ ä¸€æ¬¡</td>
</tr>
<tr>
<td><code>@Cacheable</code></td>
<td>æŸ¥è¯¢æ—¶ç¼“å­˜</td>
<td>è¯»æ“ä½œ</td>
<td><code>@Cacheable(cacheNames=&quot;setmealCache&quot;, key=&quot;#categoryId&quot;)</code></td>
</tr>
<tr>
<td><code>@CacheEvict</code></td>
<td>æ¸…é™¤ç¼“å­˜</td>
<td>å†™æ“ä½œ</td>
<td><code>@CacheEvict(cacheNames=&quot;setmealCache&quot;, allEntries=true)</code></td>
</tr>
</tbody></table>
<h3 id="ğŸ“‹-å‚æ•°è¯¦è§£"><a href="#ğŸ“‹-å‚æ•°è¯¦è§£" class="headerlink" title="ğŸ“‹ å‚æ•°è¯¦è§£"></a>ğŸ“‹ å‚æ•°è¯¦è§£</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Cacheable(</span></span><br><span class="line"><span class="meta">    cacheNames = &quot;setmealCache&quot;,  // ç¼“å­˜åˆ†ç»„å</span></span><br><span class="line"><span class="meta">    key = &quot;#categoryId&quot;           // SpELè¡¨è¾¾å¼ï¼Œå–æ–¹æ³•å‚æ•°å€¼</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"><span class="comment">// æœ€ç»ˆRedis Key: setmealCache::12</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@CacheEvict(</span></span><br><span class="line"><span class="meta">    cacheNames = &quot;setmealCache&quot;,</span></span><br><span class="line"><span class="meta">    key = &quot;#setmealDTO.categoryId&quot;  // å–å¯¹è±¡å±æ€§</span></span><br><span class="line"><span class="meta">)</span></span><br><span class="line"></span><br><span class="line"><span class="meta">@CacheEvict(</span></span><br><span class="line"><span class="meta">    cacheNames = &quot;setmealCache&quot;,</span></span><br><span class="line"><span class="meta">    allEntries = true  // æ¸…é™¤è¯¥åˆ†ç»„ä¸‹æ‰€æœ‰ç¼“å­˜</span></span><br><span class="line"><span class="meta">)</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="1-4-ä¸¤ç§æ–¹å¼å¯¹æ¯”"><a href="#1-4-ä¸¤ç§æ–¹å¼å¯¹æ¯”" class="headerlink" title="1.4 ä¸¤ç§æ–¹å¼å¯¹æ¯”"></a>1.4 ä¸¤ç§æ–¹å¼å¯¹æ¯”</h2><table>
<thead>
<tr>
<th>å¯¹æ¯”é¡¹</th>
<th>æ‰‹åŠ¨ RedisTemplate</th>
<th>Spring Cache</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ä»£ç é‡</strong></td>
<td>å¤šï¼ˆ7-10è¡Œï¼‰</td>
<td>å°‘ï¼ˆ1è¡Œæ³¨è§£ï¼‰</td>
</tr>
<tr>
<td><strong>ä¾µå…¥æ€§</strong></td>
<td>é«˜ï¼ˆæ··åœ¨ä¸šåŠ¡ä»£ç ä¸­ï¼‰</td>
<td>ä½ï¼ˆå£°æ˜å¼ï¼‰</td>
</tr>
<tr>
<td><strong>çµæ´»æ€§</strong></td>
<td>é«˜ï¼ˆå¯ç²¾ç»†æ§åˆ¶è¿‡æœŸæ—¶é—´ç­‰ï¼‰</td>
<td>ä¸­</td>
</tr>
<tr>
<td><strong>å­¦ä¹ æˆæœ¬</strong></td>
<td>é«˜</td>
<td>ä½</td>
</tr>
<tr>
<td><strong>é¡¹ç›®åº”ç”¨</strong></td>
<td>èœå“æ¨¡å— Dish</td>
<td>å¥—é¤æ¨¡å— Setmeal</td>
</tr>
<tr>
<td><strong>é€‚ç”¨åœºæ™¯</strong></td>
<td>å¤æ‚ç¼“å­˜é€»è¾‘</td>
<td>æ ‡å‡†CRUD</td>
</tr>
</tbody></table>
<hr>
<h2 id="1-5-ç¼“å­˜æ¨¡å—-é¢è¯•é¢˜åº“"><a href="#1-5-ç¼“å­˜æ¨¡å—-é¢è¯•é¢˜åº“" class="headerlink" title="1.5 ç¼“å­˜æ¨¡å— - é¢è¯•é¢˜åº“"></a>1.5 ç¼“å­˜æ¨¡å— - é¢è¯•é¢˜åº“</h2><h3 id="åŸºç¡€é¢˜"><a href="#åŸºç¡€é¢˜" class="headerlink" title="åŸºç¡€é¢˜"></a>åŸºç¡€é¢˜</h3><table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>ç­”æ¡ˆè¦ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td>Redisåœ¨é¡¹ç›®ä¸­æ€ä¹ˆç”¨çš„ï¼Ÿ</td>
<td>èœå“&#x2F;å¥—é¤ç¼“å­˜ï¼Œå‡è½»DBå‹åŠ›ï¼Œæå‡å“åº”é€Ÿåº¦</td>
</tr>
<tr>
<td>Spring CacheåŸç†ï¼Ÿ</td>
<td>åŸºäºAOPï¼Œä»£ç†å¯¹è±¡åœ¨æ–¹æ³•å‰åç»‡å…¥ç¼“å­˜é€»è¾‘</td>
</tr>
<tr>
<td>@Cacheableçš„keyæ€ä¹ˆå†™ï¼Ÿ</td>
<td>SpELè¡¨è¾¾å¼ï¼š<code>#å‚æ•°å</code>ã€<code>#å¯¹è±¡.å±æ€§</code>ã€<code>#root.methodName</code></td>
</tr>
</tbody></table>
<h3 id="è¿›é˜¶è¿½é—®"><a href="#è¿›é˜¶è¿½é—®" class="headerlink" title="è¿›é˜¶è¿½é—®"></a>è¿›é˜¶è¿½é—®</h3><table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>ç­”æ¡ˆè¦ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td>ç¼“å­˜å’Œæ•°æ®åº“æ•°æ®ä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿ</td>
<td>Cache Aside Patternï¼šå…ˆæ›´æ–°DBï¼Œå†åˆ é™¤ç¼“å­˜</td>
</tr>
<tr>
<td>Spring Cacheæœ‰ä»€ä¹ˆå‘ï¼Ÿ</td>
<td>åŒç±»æ–¹æ³•å†…éƒ¨è°ƒç”¨ï¼Œæ³¨è§£å¤±æ•ˆï¼ˆä¸èµ°ä»£ç†ï¼‰</td>
</tr>
<tr>
<td>æ›´å¤§å¹¶å‘åœºæ™¯å¦‚ä½•ä¼˜åŒ–ï¼Ÿ</td>
<td>1) è®¾ç½®è¿‡æœŸæ—¶é—´ 2) å¸ƒéš†è¿‡æ»¤å™¨é˜²ç©¿é€ 3) åˆ†å¸ƒå¼é”é˜²å‡»ç©¿</td>
</tr>
</tbody></table>
<hr>
<h1 id="ç¬¬äºŒéƒ¨åˆ†ï¼šè´­ç‰©è½¦æ¨¡å—"><a href="#ç¬¬äºŒéƒ¨åˆ†ï¼šè´­ç‰©è½¦æ¨¡å—" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†ï¼šè´­ç‰©è½¦æ¨¡å—"></a>ç¬¬äºŒéƒ¨åˆ†ï¼šè´­ç‰©è½¦æ¨¡å—</h1><h2 id="2-1-æ¨¡å—ç»“æ„"><a href="#2-1-æ¨¡å—ç»“æ„" class="headerlink" title="2.1 æ¨¡å—ç»“æ„"></a>2.1 æ¨¡å—ç»“æ„</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">è´­ç‰©è½¦æ¨¡å—</span><br><span class="line">â”œâ”€â”€ Controllerå±‚</span><br><span class="line">â”‚   â””â”€â”€ ShoppingCartController.java     # æ¥æ”¶è¯·æ±‚</span><br><span class="line">â”œâ”€â”€ Serviceå±‚</span><br><span class="line">â”‚   â”œâ”€â”€ ShoppingCartService.java        # æ¥å£</span><br><span class="line">â”‚   â””â”€â”€ ShoppingCartServiceImpl.java    # æ ¸å¿ƒä¸šåŠ¡é€»è¾‘ â­</span><br><span class="line">â”œâ”€â”€ Mapperå±‚</span><br><span class="line">â”‚   â”œâ”€â”€ ShoppingCartMapper.java         # æ¥å£</span><br><span class="line">â”‚   â””â”€â”€ ShoppingCartMapper.xml          # SQLè¯­å¥</span><br><span class="line">â””â”€â”€ POJOå±‚</span><br><span class="line">    â”œâ”€â”€ ShoppingCart.java               # å®ä½“ç±»</span><br><span class="line">    â””â”€â”€ ShoppingCartDTO.java            # ä¼ è¾“å¯¹è±¡</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-2-å››å¤§æ ¸å¿ƒåŠŸèƒ½"><a href="#2-2-å››å¤§æ ¸å¿ƒåŠŸèƒ½" class="headerlink" title="2.2 å››å¤§æ ¸å¿ƒåŠŸèƒ½"></a>2.2 å››å¤§æ ¸å¿ƒåŠŸèƒ½</h2><table>
<thead>
<tr>
<th>åŠŸèƒ½</th>
<th>è·¯å¾„</th>
<th>æ–¹æ³•</th>
<th>æ ¸å¿ƒé€»è¾‘</th>
</tr>
</thead>
<tbody><tr>
<td>æ·»åŠ è´­ç‰©è½¦</td>
<td>POST <code>/add</code></td>
<td><code>addShoppingCart()</code></td>
<td>å·²å­˜åœ¨â†’æ•°é‡+1ï¼Œä¸å­˜åœ¨â†’æ–°å¢è®°å½•</td>
</tr>
<tr>
<td>æŸ¥çœ‹è´­ç‰©è½¦</td>
<td>GET <code>/list</code></td>
<td><code>showShoppingCart()</code></td>
<td>æŒ‰userIdæŸ¥è¯¢æ‰€æœ‰è®°å½•</td>
</tr>
<tr>
<td>å‡å°‘å•†å“</td>
<td>POST <code>/sub</code></td>
<td><code>subShoppingCart()</code></td>
<td>æ•°é‡&gt;1â†’-1ï¼Œæ•°é‡&#x3D;1â†’åˆ é™¤</td>
</tr>
<tr>
<td>æ¸…ç©ºè´­ç‰©è½¦</td>
<td>DELETE <code>/clean</code></td>
<td><code>cleanShoppingCart()</code></td>
<td>æŒ‰userIdåˆ é™¤æ‰€æœ‰è®°å½•</td>
</tr>
</tbody></table>
<hr>
<h2 id="2-3-æ·»åŠ è´­ç‰©è½¦-è¯¦ç»†æµç¨‹"><a href="#2-3-æ·»åŠ è´­ç‰©è½¦-è¯¦ç»†æµç¨‹" class="headerlink" title="2.3 æ·»åŠ è´­ç‰©è½¦ - è¯¦ç»†æµç¨‹"></a>2.3 æ·»åŠ è´­ç‰©è½¦ - è¯¦ç»†æµç¨‹</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[æ¥æ”¶å‚æ•°] --&gt; B[è®¾ç½®å½“å‰ç”¨æˆ·ID&lt;br/&gt;BaseContext.getCurrentId]</span><br><span class="line">    B --&gt; C[æŸ¥è¯¢è¯¥å•†å“æ˜¯å¦å·²åœ¨è´­ç‰©è½¦]</span><br><span class="line">    C --&gt; D&#123;å·²å­˜åœ¨?&#125;</span><br><span class="line">    </span><br><span class="line">    D --&gt;|âœ… æ˜¯| E[æ•°é‡ + 1&lt;br/&gt;UPDATE]</span><br><span class="line">    </span><br><span class="line">    D --&gt;|âŒ å¦| F&#123;dishId != null?&#125;</span><br><span class="line">    F --&gt;|æ˜¯| G[æŸ¥èœå“ä¿¡æ¯]</span><br><span class="line">    F --&gt;|å¦| H[æŸ¥å¥—é¤ä¿¡æ¯]</span><br><span class="line">    G --&gt; I[æ„å»ºè´­ç‰©è½¦å¯¹è±¡&lt;br/&gt;æ•°é‡=1]</span><br><span class="line">    H --&gt; I</span><br><span class="line">    I --&gt; J[INSERTæ–°è®°å½•]</span><br><span class="line">    </span><br><span class="line">    E --&gt; K[è¿”å›æˆåŠŸ]</span><br><span class="line">    J --&gt; K</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-4-æ•°æ®åº“è®¾è®¡"><a href="#2-4-æ•°æ®åº“è®¾è®¡" class="headerlink" title="2.4 æ•°æ®åº“è®¾è®¡"></a>2.4 æ•°æ®åº“è®¾è®¡</h2><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">shopping_cart è´­ç‰©è½¦è¡¨</span><br><span class="line">â”œâ”€â”€ id              <span class="comment">-- ä¸»é”®</span></span><br><span class="line">â”œâ”€â”€ name            <span class="comment">-- å•†å“åç§° â­å†—ä½™å­—æ®µ</span></span><br><span class="line">â”œâ”€â”€ user_id         <span class="comment">-- ç”¨æˆ·IDï¼ˆå…³é”®ï¼éš”ç¦»ä¸åŒç”¨æˆ·ï¼‰</span></span><br><span class="line">â”œâ”€â”€ dish_id         <span class="comment">-- èœå“IDï¼ˆä¸setmeal_idäºŒé€‰ä¸€ï¼‰</span></span><br><span class="line">â”œâ”€â”€ setmeal_id      <span class="comment">-- å¥—é¤ID</span></span><br><span class="line">â”œâ”€â”€ dish_flavor     <span class="comment">-- å£å‘³ï¼ˆåŒºåˆ†åŒèœå“ä¸åŒå£å‘³ï¼‰</span></span><br><span class="line">â”œâ”€â”€ number          <span class="comment">-- æ•°é‡</span></span><br><span class="line">â”œâ”€â”€ amount          <span class="comment">-- å•ä»· â­å†—ä½™å­—æ®µ</span></span><br><span class="line">â”œâ”€â”€ image           <span class="comment">-- å›¾ç‰‡ â­å†—ä½™å­—æ®µ</span></span><br><span class="line">â””â”€â”€ create_time     <span class="comment">-- åˆ›å»ºæ—¶é—´</span></span><br></pre></td></tr></table></figure>

<p><strong>è®¾è®¡äº®ç‚¹</strong>ï¼šå†—ä½™å­˜å‚¨ <code>name</code>ã€<code>image</code>ã€<code>amount</code>ï¼ŒæŸ¥è¯¢æ—¶æ— éœ€JOINï¼Œç©ºé—´æ¢æ—¶é—´ï¼</p>
<hr>
<h2 id="2-5-å…³é”®æŠ€æœ¯ç‚¹"><a href="#2-5-å…³é”®æŠ€æœ¯ç‚¹" class="headerlink" title="2.5 å…³é”®æŠ€æœ¯ç‚¹"></a>2.5 å…³é”®æŠ€æœ¯ç‚¹</h2><h3 id="ğŸ”-ç”¨æˆ·éš”ç¦»-ThreadLocal"><a href="#ğŸ”-ç”¨æˆ·éš”ç¦»-ThreadLocal" class="headerlink" title="ğŸ” ç”¨æˆ·éš”ç¦» - ThreadLocal"></a>ğŸ” ç”¨æˆ·éš”ç¦» - ThreadLocal</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‹¦æˆªå™¨ä¸­å­˜å…¥ç”¨æˆ·ID</span></span><br><span class="line">BaseContext.setCurrentId(userId);</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸šåŠ¡ä»£ç ä¸­è·å–</span></span><br><span class="line"><span class="type">Long</span> <span class="variable">userId</span> <span class="operator">=</span> BaseContext.getCurrentId();</span><br><span class="line"></span><br><span class="line"><span class="comment">// æŸ¥è¯¢æ—¶è‡ªåŠ¨å¸¦ä¸ŠuserIdæ¡ä»¶</span></span><br><span class="line">shoppingCart.setUserId(BaseContext.getCurrentId());</span><br></pre></td></tr></table></figure>

<h3 id="ğŸ½ï¸-å£å‘³åŒºåˆ†"><a href="#ğŸ½ï¸-å£å‘³åŒºåˆ†" class="headerlink" title="ğŸ½ï¸ å£å‘³åŒºåˆ†"></a>ğŸ½ï¸ å£å‘³åŒºåˆ†</h3><p>åŒä¸€èœå“ä¸åŒå£å‘³ &#x3D; ä¸åŒçš„è´­ç‰©è½¦è®°å½•ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;dishFlavor!=null&quot;</span>&gt;</span>and dish_flavor=#&#123;dishFlavor&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="2-6-è´­ç‰©è½¦æ¨¡å—-é¢è¯•é¢˜åº“"><a href="#2-6-è´­ç‰©è½¦æ¨¡å—-é¢è¯•é¢˜åº“" class="headerlink" title="2.6 è´­ç‰©è½¦æ¨¡å— - é¢è¯•é¢˜åº“"></a>2.6 è´­ç‰©è½¦æ¨¡å— - é¢è¯•é¢˜åº“</h2><table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>ç­”æ¡ˆè¦ç‚¹</th>
</tr>
</thead>
<tbody><tr>
<td>è´­ç‰©è½¦æ•°æ®å­˜å“ªé‡Œï¼Ÿ</td>
<td>æ•°æ®åº“ï¼ˆæœ¬é¡¹ç›®ï¼‰ï¼Œä¹Ÿå¯ç”¨Redis Hash</td>
</tr>
<tr>
<td>å¦‚ä½•ä¿è¯ç”¨æˆ·åªèƒ½çœ‹è‡ªå·±çš„è´­ç‰©è½¦ï¼Ÿ</td>
<td>ThreadLocalå­˜å‚¨å½“å‰ç”¨æˆ·IDï¼ŒæŸ¥è¯¢æ—¶å¸¦userIdæ¡ä»¶</td>
</tr>
<tr>
<td>åŒèœå“ä¸åŒå£å‘³æ€ä¹ˆå¤„ç†ï¼Ÿ</td>
<td>dish_flavorä½œä¸ºæŸ¥è¯¢æ¡ä»¶ï¼Œä¸åŒå£å‘³æ˜¯ä¸åŒè®°å½•</td>
</tr>
<tr>
<td>ä¸ºä»€ä¹ˆå†—ä½™å­˜å‚¨name&#x2F;image&#x2F;amountï¼Ÿ</td>
<td>é¿å…æŸ¥è¯¢æ—¶JOINï¼Œæå‡æ€§èƒ½</td>
</tr>
<tr>
<td>å¦‚æœç”¨Rediså­˜è´­ç‰©è½¦æ€ä¹ˆè®¾è®¡ï¼Ÿ</td>
<td>Hashç»“æ„ï¼ŒKey&#x3D;<code>cart:userId</code>ï¼ŒField&#x3D;<code>dishId:flavor</code>ï¼ŒValue&#x3D;æ•°é‡</td>
</tr>
</tbody></table>
<hr>
<h1 id="ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ³¨è§£é€ŸæŸ¥è¡¨"><a href="#ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ³¨è§£é€ŸæŸ¥è¡¨" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ³¨è§£é€ŸæŸ¥è¡¨"></a>ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ³¨è§£é€ŸæŸ¥è¡¨</h1><h2 id="Spring-æ ¸å¿ƒæ³¨è§£"><a href="#Spring-æ ¸å¿ƒæ³¨è§£" class="headerlink" title="Spring æ ¸å¿ƒæ³¨è§£"></a>Spring æ ¸å¿ƒæ³¨è§£</h2><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>æ¥æº</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>@RestController</code></td>
<td>Spring MVC</td>
<td>æ§åˆ¶å™¨ + è¿”å›å€¼è½¬JSON</td>
</tr>
<tr>
<td><code>@RequestMapping</code></td>
<td>Spring MVC</td>
<td>URLè·¯å¾„å‰ç¼€</td>
</tr>
<tr>
<td><code>@GetMapping</code> &#x2F; <code>@PostMapping</code></td>
<td>Spring MVC</td>
<td>å¤„ç†GET&#x2F;POSTè¯·æ±‚</td>
</tr>
<tr>
<td><code>@Autowired</code></td>
<td>Spring Core</td>
<td>è‡ªåŠ¨æ³¨å…¥ä¾èµ–</td>
</tr>
<tr>
<td><code>@Service</code></td>
<td>Spring Core</td>
<td>æ ‡è®°Serviceå±‚ç»„ä»¶</td>
</tr>
<tr>
<td><code>@Mapper</code></td>
<td>MyBatis</td>
<td>æ ‡è®°Mapperæ¥å£</td>
</tr>
</tbody></table>
<h2 id="Lombok-æ³¨è§£"><a href="#Lombok-æ³¨è§£" class="headerlink" title="Lombok æ³¨è§£"></a>Lombok æ³¨è§£</h2><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>@Data</code></td>
<td>ç”Ÿæˆgetter&#x2F;setter&#x2F;toStringç­‰</td>
</tr>
<tr>
<td><code>@Slf4j</code></td>
<td>ç”Ÿæˆlogå¯¹è±¡</td>
</tr>
<tr>
<td><code>@Builder</code></td>
<td>ç”Ÿæˆå»ºé€ è€…æ¨¡å¼ä»£ç </td>
</tr>
<tr>
<td><code>@NoArgsConstructor</code></td>
<td>æ— å‚æ„é€ </td>
</tr>
<tr>
<td><code>@AllArgsConstructor</code></td>
<td>å…¨å‚æ„é€ </td>
</tr>
</tbody></table>
<h2 id="Swagger-æ³¨è§£"><a href="#Swagger-æ³¨è§£" class="headerlink" title="Swagger æ³¨è§£"></a>Swagger æ³¨è§£</h2><table>
<thead>
<tr>
<th>æ³¨è§£</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody><tr>
<td><code>@Api(tags=&quot;...&quot;)</code></td>
<td>Controlleråˆ†ç»„æè¿°</td>
</tr>
<tr>
<td><code>@ApiOperation(&quot;...&quot;)</code></td>
<td>å•ä¸ªæ¥å£æè¿°</td>
</tr>
</tbody></table>
<hr>
<h1 id="ç¬¬å››éƒ¨åˆ†ï¼šå¾…å­¦ä¹ æ¸…å•"><a href="#ç¬¬å››éƒ¨åˆ†ï¼šå¾…å­¦ä¹ æ¸…å•" class="headerlink" title="ç¬¬å››éƒ¨åˆ†ï¼šå¾…å­¦ä¹ æ¸…å•"></a>ç¬¬å››éƒ¨åˆ†ï¼šå¾…å­¦ä¹ æ¸…å•</h1><p>æ ¹æ®ä»Šå¤©çš„å­¦ä¹ ï¼Œå»ºè®®ä½ åç»­ç»§ç»­æ·±å…¥ï¼š</p>
<table>
<thead>
<tr>
<th>ä¼˜å…ˆçº§</th>
<th>æ¨¡å—</th>
<th>é¢è¯•çƒ­åº¦</th>
</tr>
</thead>
<tbody><tr>
<td>â­â­â­â­â­</td>
<td>ThreadLocal + JWT ç™»å½•è®¤è¯</td>
<td>å¿…é—®</td>
</tr>
<tr>
<td>â­â­â­â­â­</td>
<td>AOP å…¬å…±å­—æ®µå¡«å……</td>
<td>é«˜é¢‘</td>
</tr>
<tr>
<td>â­â­â­â­</td>
<td>ä¸‹å•æµç¨‹ï¼ˆè´­ç‰©è½¦â†’è®¢å•ï¼‰</td>
<td>é«˜é¢‘</td>
</tr>
<tr>
<td>â­â­â­â­</td>
<td>äº‹åŠ¡ç®¡ç† @Transactional</td>
<td>é«˜é¢‘</td>
</tr>
<tr>
<td>â­â­â­</td>
<td>WebSocket æ¥å•æé†’</td>
<td>ä¸­é¢‘</td>
</tr>
<tr>
<td>â­â­â­</td>
<td>å®šæ—¶ä»»åŠ¡ï¼ˆè®¢å•è¶…æ—¶å¤„ç†ï¼‰</td>
<td>ä¸­é¢‘</td>
</tr>
</tbody></table>
<hr>
<h2 id="ğŸ“-å¤ä¹ å»ºè®®"><a href="#ğŸ“-å¤ä¹ å»ºè®®" class="headerlink" title="ğŸ“ å¤ä¹ å»ºè®®"></a>ğŸ“ å¤ä¹ å»ºè®®</h2><ol>
<li><strong>ä»Šå¤©</strong>ï¼šæŠŠæµç¨‹å›¾è‡ªå·±æ‰‹ç”»ä¸€éï¼ˆä¸çœ‹ç¬”è®°ï¼‰</li>
<li><strong>æ˜å¤©</strong>ï¼šå°è¯•ä¸çœ‹æºç ï¼Œè‡ªå·±å†™ä¸€éæ·»åŠ è´­ç‰©è½¦çš„é€»è¾‘</li>
<li><strong>åç»­</strong>ï¼šå¸¦ç€é¢è¯•é¢˜å»è¯»æºç ï¼Œæ¯å­¦ä¸€ä¸ªæ¨¡å—å°±æ•´ç†é¢è¯•é¢˜</li>
</ol>
<hr>
<p>æ ¹æ®ä½ ä¹‹å‰çš„æé—®é£æ ¼å’ŒåŸºç¡€æ°´å¹³ï¼Œæˆ‘é¢„æµ‹ä½ å¯èƒ½å¯¹ä»¥ä¸‹çŸ¥è¯†ç‚¹<strong>ä¼¼æ‡‚éæ‡‚</strong>ï¼Œè®©æˆ‘é€ä¸ªå‡»ç ´ï¼š</p>
<hr>
<h2 id="ğŸ¤”-é¢„æµ‹ä¸€ï¼šRedisTemplate-çš„ç±»å‹è½¬æ¢çœ‹ä¸æ‡‚"><a href="#ğŸ¤”-é¢„æµ‹ä¸€ï¼šRedisTemplate-çš„ç±»å‹è½¬æ¢çœ‹ä¸æ‡‚" class="headerlink" title="ğŸ¤” é¢„æµ‹ä¸€ï¼šRedisTemplate çš„ç±»å‹è½¬æ¢çœ‹ä¸æ‡‚"></a>ğŸ¤” é¢„æµ‹ä¸€ï¼šRedisTemplate çš„ç±»å‹è½¬æ¢çœ‹ä¸æ‡‚</h2><h3 id="ä½ å¯èƒ½çš„å›°æƒ‘"><a href="#ä½ å¯èƒ½çš„å›°æƒ‘" class="headerlink" title="ä½ å¯èƒ½çš„å›°æƒ‘"></a>ä½ å¯èƒ½çš„å›°æƒ‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">List&lt;DishVO&gt; list = (List&lt;DishVO&gt;) redisTemplate.opsForValue().get(key);</span><br><span class="line"><span class="comment">//                  â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘</span></span><br><span class="line"><span class="comment">//                  è¿™ä¸ªå¼ºåˆ¶è½¬æ¢æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿä¸ºä»€ä¹ˆè¦è½¬ï¼Ÿ</span></span><br></pre></td></tr></table></figure>

<h3 id="è¯¦ç»†è§£ç­”"><a href="#è¯¦ç»†è§£ç­”" class="headerlink" title="è¯¦ç»†è§£ç­”"></a>è¯¦ç»†è§£ç­”</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">flowchart LR</span><br><span class="line">    A[Javaå¯¹è±¡&lt;br/&gt;List&amp;lt;DishVO&amp;gt;] --&gt;|å­˜å…¥Redis| B[åºåˆ—åŒ–ä¸º&lt;br/&gt;äºŒè¿›åˆ¶/JSONå­—ç¬¦ä¸²]</span><br><span class="line">    B --&gt;|å–å‡ºæ¥| C[Objectç±»å‹]</span><br><span class="line">    C --&gt;|å¼ºåˆ¶è½¬æ¢| D[List&amp;lt;DishVO&amp;gt;]</span><br></pre></td></tr></table></figure>

<p><strong>åŸå› </strong>ï¼š</p>
<ol>
<li>Redis å­˜å‚¨çš„æ˜¯å­—ç¬¦ä¸²&#x2F;äºŒè¿›åˆ¶ï¼Œä¸æ˜¯ Java å¯¹è±¡</li>
<li><code>get(key)</code> è¿”å›çš„æ˜¯ <code>Object</code> ç±»å‹ï¼ˆå› ä¸ºRedisä¸çŸ¥é“ä½ å­˜çš„æ˜¯ä»€ä¹ˆç±»å‹ï¼‰</li>
<li>ä½ éœ€è¦<strong>å¼ºåˆ¶è½¬æ¢</strong>å‘Šè¯‰Javaï¼šâ€æˆ‘çŸ¥é“è¿™æ˜¯ä¸ª <code>List&lt;DishVO&gt;</code>â€œ</li>
</ol>
<p><strong>ç±»æ¯”ç†è§£</strong>ï¼š</p>
<blockquote>
<p>å°±åƒå¿«é€’æŸœå–ä»¶ï¼Œå¿«é€’æŸœåªçŸ¥é“é‡Œé¢æœ‰ä¸ªâ€åŒ…è£¹â€ï¼ˆObjectï¼‰ï¼Œä½†ä½ çŸ¥é“ä½ ä¹°çš„æ˜¯â€ä¹¦â€ï¼ˆList<DishVO>ï¼‰ï¼Œæ‰€ä»¥ä½ å–å‡ºæ¥åè¦å½“ä½œâ€ä¹¦â€æ¥ç”¨ã€‚</p>
</blockquote>
<hr>
<h2 id="ğŸ¤”-é¢„æµ‹äºŒï¼šBaseContext-getCurrentId-åˆ°åº•æ€ä¹ˆæ¥çš„ï¼Ÿ"><a href="#ğŸ¤”-é¢„æµ‹äºŒï¼šBaseContext-getCurrentId-åˆ°åº•æ€ä¹ˆæ¥çš„ï¼Ÿ" class="headerlink" title="ğŸ¤” é¢„æµ‹äºŒï¼šBaseContext.getCurrentId() åˆ°åº•æ€ä¹ˆæ¥çš„ï¼Ÿ"></a>ğŸ¤” é¢„æµ‹äºŒï¼šBaseContext.getCurrentId() åˆ°åº•æ€ä¹ˆæ¥çš„ï¼Ÿ</h2><h3 id="ä½ å¯èƒ½çš„å›°æƒ‘-1"><a href="#ä½ å¯èƒ½çš„å›°æƒ‘-1" class="headerlink" title="ä½ å¯èƒ½çš„å›°æƒ‘"></a>ä½ å¯èƒ½çš„å›°æƒ‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shoppingCart.setUserId(BaseContext.getCurrentId());</span><br><span class="line"><span class="comment">//                     â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘</span></span><br><span class="line"><span class="comment">//                     è¿™ä¸ªIDä»å“ªæ¥çš„ï¼Ÿè°å­˜è¿›å»çš„ï¼Ÿ</span></span><br></pre></td></tr></table></figure>

<h3 id="è¯¦ç»†è§£ç­”-1"><a href="#è¯¦ç»†è§£ç­”-1" class="headerlink" title="è¯¦ç»†è§£ç­”"></a>è¯¦ç»†è§£ç­”</h3><p>å®Œæ•´æµç¨‹å›¾ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sequenceDiagram</span><br><span class="line">    participant ç”¨æˆ· as ç”¨æˆ·å°ç¨‹åº</span><br><span class="line">    participant æ‹¦æˆªå™¨ as JwtTokenUserInterceptor</span><br><span class="line">    participant TL as ThreadLocal</span><br><span class="line">    participant ä¸šåŠ¡ as ShoppingCartService</span><br><span class="line">    </span><br><span class="line">    ç”¨æˆ·-&gt;&gt;æ‹¦æˆªå™¨: è¯·æ±‚ï¼ˆå¸¦JWT Tokenï¼‰</span><br><span class="line">    æ‹¦æˆªå™¨-&gt;&gt;æ‹¦æˆªå™¨: è§£æJWTï¼Œæå–userId</span><br><span class="line">    æ‹¦æˆªå™¨-&gt;&gt;TL: BaseContext.setCurrentId(userId)</span><br><span class="line">    æ‹¦æˆªå™¨-&gt;&gt;ä¸šåŠ¡: æ”¾è¡Œè¯·æ±‚</span><br><span class="line">    ä¸šåŠ¡-&gt;&gt;TL: BaseContext.getCurrentId()</span><br><span class="line">    TL--&gt;&gt;ä¸šåŠ¡: è¿”å›userId</span><br><span class="line">    ä¸šåŠ¡-&gt;&gt;ä¸šåŠ¡: ç”¨userIdæŸ¥è¯¢/æ“ä½œè´­ç‰©è½¦</span><br></pre></td></tr></table></figure>

<h3 id="æ ¸å¿ƒä»£ç è§£è¯»"><a href="#æ ¸å¿ƒä»£ç è§£è¯»" class="headerlink" title="æ ¸å¿ƒä»£ç è§£è¯»"></a>æ ¸å¿ƒä»£ç è§£è¯»</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// æ‹¦æˆªå™¨ä¸­ï¼ˆè¯·æ±‚è¿›æ¥æ—¶ï¼‰</span></span><br><span class="line"><span class="type">Claims</span> <span class="variable">claims</span> <span class="operator">=</span> JwtUtil.parseJWT(secretKey, token);  <span class="comment">// è§£æJWT</span></span><br><span class="line"><span class="type">Long</span> <span class="variable">userId</span> <span class="operator">=</span> Long.valueOf(claims.get(<span class="string">&quot;userId&quot;</span>));     <span class="comment">// æå–ç”¨æˆ·ID</span></span><br><span class="line">BaseContext.setCurrentId(userId);                     <span class="comment">// å­˜å…¥ThreadLocal â­</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¸šåŠ¡ä»£ç ä¸­ï¼ˆåç»­ä½¿ç”¨ï¼‰</span></span><br><span class="line"><span class="type">Long</span> <span class="variable">userId</span> <span class="operator">=</span> BaseContext.getCurrentId();            <span class="comment">// ä»ThreadLocalå–å‡º â­</span></span><br></pre></td></tr></table></figure>

<h3 id="ThreadLocal-é€šä¿—ç†è§£"><a href="#ThreadLocal-é€šä¿—ç†è§£" class="headerlink" title="ThreadLocal é€šä¿—ç†è§£"></a>ThreadLocal é€šä¿—ç†è§£</h3><blockquote>
<p><strong>ç±»æ¯”</strong>ï¼šThreadLocal å°±åƒæ¯ä¸ªå‘˜å·¥ï¼ˆçº¿ç¨‹ï¼‰è‡ªå·±çš„æŠ½å±‰ã€‚</p>
<ul>
<li>æ‹¦æˆªå™¨æŠŠâ€å·¥ç‰Œâ€ï¼ˆuserIdï¼‰æ”¾è¿›ä½ çš„æŠ½å±‰</li>
<li>åé¢å¹²æ´»æ—¶ï¼Œä½ ä»è‡ªå·±çš„æŠ½å±‰å–å·¥ç‰Œ</li>
<li>æ¯ä¸ªå‘˜å·¥çš„æŠ½å±‰äº’ä¸å¹²æ‰°ï¼ˆçº¿ç¨‹éš”ç¦»ï¼‰</li>
</ul>
</blockquote>
<hr>
<h2 id="ğŸ¤”-é¢„æµ‹ä¸‰ï¼šBeanUtils-copyProperties-æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#ğŸ¤”-é¢„æµ‹ä¸‰ï¼šBeanUtils-copyProperties-æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="ğŸ¤” é¢„æµ‹ä¸‰ï¼šBeanUtils.copyProperties æ˜¯ä»€ä¹ˆï¼Ÿ"></a>ğŸ¤” é¢„æµ‹ä¸‰ï¼šBeanUtils.copyProperties æ˜¯ä»€ä¹ˆï¼Ÿ</h2><h3 id="ä½ å¯èƒ½çš„å›°æƒ‘-2"><a href="#ä½ å¯èƒ½çš„å›°æƒ‘-2" class="headerlink" title="ä½ å¯èƒ½çš„å›°æƒ‘"></a>ä½ å¯èƒ½çš„å›°æƒ‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">ShoppingCart</span> <span class="variable">shoppingCart</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShoppingCart</span>();</span><br><span class="line">BeanUtils.copyProperties(shoppingCartDTO, shoppingCart);</span><br><span class="line"><span class="comment">//        â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘</span></span><br><span class="line"><span class="comment">//        è¿™æ˜¯åœ¨å¹²ä»€ä¹ˆï¼Ÿ</span></span><br></pre></td></tr></table></figure>

<h3 id="è¯¦ç»†è§£ç­”-2"><a href="#è¯¦ç»†è§£ç­”-2" class="headerlink" title="è¯¦ç»†è§£ç­”"></a>è¯¦ç»†è§£ç­”</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">flowchart LR</span><br><span class="line">    subgraph ShoppingCartDTO</span><br><span class="line">        A1[dishId: 10]</span><br><span class="line">        A2[setmealId: null]</span><br><span class="line">        A3[dishFlavor: ä¸è¾£]</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    subgraph ShoppingCart</span><br><span class="line">        B1[dishId: ?]</span><br><span class="line">        B2[setmealId: ?]</span><br><span class="line">        B3[dishFlavor: ?]</span><br><span class="line">        B4[userId: ?]</span><br><span class="line">        B5[name: ?]</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    A1 --&gt;|å¤åˆ¶| B1</span><br><span class="line">    A2 --&gt;|å¤åˆ¶| B2</span><br><span class="line">    A3 --&gt;|å¤åˆ¶| B3</span><br></pre></td></tr></table></figure>

<p><strong>ä½œç”¨</strong>ï¼šæŠŠä¸€ä¸ªå¯¹è±¡çš„å±æ€§å€¼<strong>æ‰¹é‡å¤åˆ¶</strong>åˆ°å¦ä¸€ä¸ªå¯¹è±¡ï¼ˆå±æ€§åç›¸åŒçš„æ‰ä¼šå¤åˆ¶ï¼‰</p>
<p><strong>ç­‰ä»·äºæ‰‹å†™</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ç”¨BeanUtilsï¼Œä½ è¦å†™ä¸€å †ï¼š</span></span><br><span class="line">shoppingCart.setDishId(shoppingCartDTO.getDishId());</span><br><span class="line">shoppingCart.setSetmealId(shoppingCartDTO.getSetmealId());</span><br><span class="line">shoppingCart.setDishFlavor(shoppingCartDTO.getDishFlavor());</span><br><span class="line"><span class="comment">// ...è¿˜æœ‰å¾ˆå¤š</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// ç”¨BeanUtilsä¸€è¡Œæå®šï¼š</span></span><br><span class="line">BeanUtils.copyProperties(shoppingCartDTO, shoppingCart);</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ¤”-é¢„æµ‹å››ï¼šåŠ¨æ€SQLçš„-æ ‡ç­¾"><a href="#ğŸ¤”-é¢„æµ‹å››ï¼šåŠ¨æ€SQLçš„-æ ‡ç­¾" class="headerlink" title="ğŸ¤” é¢„æµ‹å››ï¼šåŠ¨æ€SQLçš„ &lt;where&gt; æ ‡ç­¾"></a>ğŸ¤” é¢„æµ‹å››ï¼šåŠ¨æ€SQLçš„ <code>&lt;where&gt;</code> æ ‡ç­¾</h2><h3 id="ä½ å¯èƒ½çš„å›°æƒ‘-3"><a href="#ä½ å¯èƒ½çš„å›°æƒ‘-3" class="headerlink" title="ä½ å¯èƒ½çš„å›°æƒ‘"></a>ä½ å¯èƒ½çš„å›°æƒ‘</h3><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.sky.entity.ShoppingCart&quot;</span>&gt;</span></span><br><span class="line">    select * from shopping_cart</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userId!=null&quot;</span>&gt;</span>and user_id=#&#123;userId&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;dishId!=null&quot;</span>&gt;</span>and dish_id=#&#123;dishId&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p><strong>é—®é¢˜</strong>ï¼šä¸ºä»€ä¹ˆä¸ç›´æ¥å†™ <code>WHERE and user_id=...</code>ï¼Ÿ</p>
<h3 id="è¯¦ç»†è§£ç­”-3"><a href="#è¯¦ç»†è§£ç­”-3" class="headerlink" title="è¯¦ç»†è§£ç­”"></a>è¯¦ç»†è§£ç­”</h3><p><strong><code>&lt;where&gt;</code> æ ‡ç­¾çš„é­”æ³•</strong>ï¼š</p>
<ol>
<li>è‡ªåŠ¨æ·»åŠ  <code>WHERE</code> å…³é”®å­—</li>
<li>è‡ªåŠ¨å»æ‰å¼€å¤´å¤šä½™çš„ <code>AND</code> æˆ– <code>OR</code></li>
</ol>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[ä¼ å…¥æ¡ä»¶: userId=1, dishId=null] --&gt; B[&quot;&amp;lt;where&amp;gt; æ ‡ç­¾å¤„ç†&quot;]</span><br><span class="line">    B --&gt; C[&quot;ç”Ÿæˆ: WHERE user_id=1&quot;]</span><br><span class="line">    </span><br><span class="line">    D[ä¼ å…¥æ¡ä»¶: userId=null, dishId=null] --&gt; E[&quot;&amp;lt;where&amp;gt; æ ‡ç­¾å¤„ç†&quot;]</span><br><span class="line">    E --&gt; F[&quot;ç”Ÿæˆ: æ— WHERE&lt;br/&gt;æŸ¥è¯¢å…¨éƒ¨&quot;]</span><br><span class="line">    </span><br><span class="line">    G[ä¼ å…¥æ¡ä»¶: userId=1, dishId=10] --&gt; H[&quot;&amp;lt;where&amp;gt; æ ‡ç­¾å¤„ç†&quot;]</span><br><span class="line">    H --&gt; I[&quot;ç”Ÿæˆ: WHERE user_id=1 AND dish_id=10&quot;]</span><br></pre></td></tr></table></figure>

<p><strong>å¦‚æœä¸ç”¨ <code>&lt;where&gt;</code> ä¼šå‡ºé—®é¢˜</strong>ï¼š</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- å¦‚æœuserIdä¸ºç©ºï¼ŒdishIdä¸ä¸ºç©ºï¼Œä¼šç”Ÿæˆï¼š</span></span><br><span class="line"><span class="keyword">SELECT</span> <span class="operator">*</span> <span class="keyword">FROM</span> shopping_cart <span class="keyword">WHERE</span> <span class="keyword">AND</span> dish_id<span class="operator">=</span><span class="number">10</span></span><br><span class="line"><span class="comment">--                            â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘â†‘</span></span><br><span class="line"><span class="comment">--                            è¯­æ³•é”™è¯¯ï¼WHEREåé¢ç›´æ¥è·ŸAND</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ¤”-é¢„æµ‹äº”ï¼šSpring-Cache-çš„ç¼“å­˜åˆ°åº•å­˜åœ¨å“ªé‡Œï¼Ÿ"><a href="#ğŸ¤”-é¢„æµ‹äº”ï¼šSpring-Cache-çš„ç¼“å­˜åˆ°åº•å­˜åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="ğŸ¤” é¢„æµ‹äº”ï¼šSpring Cache çš„ç¼“å­˜åˆ°åº•å­˜åœ¨å“ªé‡Œï¼Ÿ"></a>ğŸ¤” é¢„æµ‹äº”ï¼šSpring Cache çš„ç¼“å­˜åˆ°åº•å­˜åœ¨å“ªé‡Œï¼Ÿ</h2><h3 id="ä½ å¯èƒ½çš„å›°æƒ‘-4"><a href="#ä½ å¯èƒ½çš„å›°æƒ‘-4" class="headerlink" title="ä½ å¯èƒ½çš„å›°æƒ‘"></a>ä½ å¯èƒ½çš„å›°æƒ‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Cacheable(cacheNames = &quot;setmealCache&quot;, key = &quot;#categoryId&quot;)</span></span><br><span class="line"><span class="comment">// è¿™ä¸ªç¼“å­˜å­˜åœ¨å“ªé‡Œï¼Ÿå†…å­˜ï¼ŸRedisï¼Ÿæ–‡ä»¶ï¼Ÿ</span></span><br></pre></td></tr></table></figure>

<h3 id="è¯¦ç»†è§£ç­”-4"><a href="#è¯¦ç»†è§£ç­”-4" class="headerlink" title="è¯¦ç»†è§£ç­”"></a>è¯¦ç»†è§£ç­”</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[&quot;@EnableCaching&lt;br/&gt;å¼€å¯ç¼“å­˜&quot;] --&gt; B&#123;&quot;æœ‰Redisä¾èµ–?&quot;&#125;</span><br><span class="line">    B --&gt;|æœ‰ spring-boot-starter-data-redis| C[è‡ªåŠ¨ä½¿ç”¨Redisä½œä¸ºç¼“å­˜ âœ…]</span><br><span class="line">    B --&gt;|æ²¡æœ‰| D[ä½¿ç”¨å†…å­˜ç¼“å­˜&lt;br/&gt;ConcurrentHashMap]</span><br><span class="line">    </span><br><span class="line">    style C fill:#90EE90</span><br></pre></td></tr></table></figure>

<p><strong>æœ¬é¡¹ç›®çš„æƒ…å†µ</strong>ï¼š</p>
<ul>
<li>å¼•å…¥äº† <code>spring-boot-starter-data-redis</code> ä¾èµ–</li>
<li>é…ç½®äº† Redis è¿æ¥ä¿¡æ¯</li>
<li>Spring Boot <strong>è‡ªåŠ¨é…ç½®</strong>ï¼Œä½¿ç”¨ Redis ä½œä¸º Spring Cache çš„å­˜å‚¨</li>
</ul>
<p><strong>ç¼“å­˜Keyæ ¼å¼</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">setmealCache::12</span><br><span class="line">     â†‘         â†‘</span><br><span class="line"> cacheNames   keyå€¼</span><br></pre></td></tr></table></figure>

<p>ä½ å¯ä»¥ç”¨ Redis å®¢æˆ·ç«¯å·¥å…·ï¼ˆå¦‚ Redis Desktop Managerï¼‰æŸ¥çœ‹ï¼Œä¼šçœ‹åˆ°è¿™äº›Keyï¼</p>
<hr>
<h2 id="ğŸ¤”-é¢„æµ‹å…­ï¼šä¸ºä»€ä¹ˆæŸ¥è¯¢ç”¨å¯¹è±¡è€Œä¸æ˜¯ç›´æ¥ä¼ å‚æ•°ï¼Ÿ"><a href="#ğŸ¤”-é¢„æµ‹å…­ï¼šä¸ºä»€ä¹ˆæŸ¥è¯¢ç”¨å¯¹è±¡è€Œä¸æ˜¯ç›´æ¥ä¼ å‚æ•°ï¼Ÿ" class="headerlink" title="ğŸ¤” é¢„æµ‹å…­ï¼šä¸ºä»€ä¹ˆæŸ¥è¯¢ç”¨å¯¹è±¡è€Œä¸æ˜¯ç›´æ¥ä¼ å‚æ•°ï¼Ÿ"></a>ğŸ¤” é¢„æµ‹å…­ï¼šä¸ºä»€ä¹ˆæŸ¥è¯¢ç”¨å¯¹è±¡è€Œä¸æ˜¯ç›´æ¥ä¼ å‚æ•°ï¼Ÿ</h2><h3 id="ä½ å¯èƒ½çš„å›°æƒ‘-5"><a href="#ä½ å¯èƒ½çš„å›°æƒ‘-5" class="headerlink" title="ä½ å¯èƒ½çš„å›°æƒ‘"></a>ä½ å¯èƒ½çš„å›°æƒ‘</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ä¸ºä»€ä¹ˆè¦è¿™æ ·ï¼Ÿ</span></span><br><span class="line"><span class="type">Dish</span> <span class="variable">dish</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Dish</span>();</span><br><span class="line">dish.setCategoryId(categoryId);</span><br><span class="line">dish.setStatus(StatusConstant.ENABLE);</span><br><span class="line">list = dishService.listWithFlavor(dish);</span><br><span class="line"></span><br><span class="line"><span class="comment">// è€Œä¸æ˜¯ç›´æ¥è¿™æ ·ï¼Ÿ</span></span><br><span class="line">list = dishService.listWithFlavor(categoryId, status);</span><br></pre></td></tr></table></figure>

<h3 id="è¯¦ç»†è§£ç­”-5"><a href="#è¯¦ç»†è§£ç­”-5" class="headerlink" title="è¯¦ç»†è§£ç­”"></a>è¯¦ç»†è§£ç­”</h3><p><strong>åŸå› ï¼šæ‰©å±•æ€§å’Œçµæ´»æ€§</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">flowchart LR</span><br><span class="line">    subgraph ä¼ å‚æ•°æ–¹å¼</span><br><span class="line">        A1[&quot;listWithFlavor(categoryId, status)&quot;]</span><br><span class="line">        A2[&quot;ä»¥ååŠ æ¡ä»¶?&lt;br/&gt;listWithFlavor(categoryId, status, name, price...)&quot;]</span><br><span class="line">        A3[&quot;å‚æ•°çˆ†ç‚¸! ğŸ’¥&quot;]</span><br><span class="line">        A1 --&gt; A2 --&gt; A3</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    subgraph ä¼ å¯¹è±¡æ–¹å¼</span><br><span class="line">        B1[&quot;listWithFlavor(Dish dish)&quot;]</span><br><span class="line">        B2[&quot;ä»¥ååŠ æ¡ä»¶?&lt;br/&gt;dish.setName(xxx)&lt;br/&gt;è¿˜æ˜¯ä¸€ä¸ªå‚æ•°&quot;]</span><br><span class="line">        B3[&quot;ä¼˜é›…! âœ…&quot;]</span><br><span class="line">        B1 --&gt; B2 --&gt; B3</span><br><span class="line">    end</span><br></pre></td></tr></table></figure>

<p><strong>é…åˆåŠ¨æ€SQL</strong>ï¼š</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">    select * from dish</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;categoryId != null&quot;</span>&gt;</span>and category_id = #&#123;categoryId&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;status != null&quot;</span>&gt;</span>and status = #&#123;status&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;name != null&quot;</span>&gt;</span>and name like concat(&#x27;%&#x27;,#&#123;name&#125;,&#x27;%&#x27;)<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="comment">&lt;!-- ä»¥ååŠ æ¡ä»¶ï¼ŒSQLæ”¹ä¸€è¡Œå°±è¡Œï¼Œæ–¹æ³•ç­¾åä¸ç”¨æ”¹ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ¤”-é¢„æµ‹ä¸ƒï¼šç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©ï¼ˆé¢è¯•å¿…é—®ä½†ä½ å¯èƒ½æ²¡æ¦‚å¿µï¼‰"><a href="#ğŸ¤”-é¢„æµ‹ä¸ƒï¼šç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©ï¼ˆé¢è¯•å¿…é—®ä½†ä½ å¯èƒ½æ²¡æ¦‚å¿µï¼‰" class="headerlink" title="ğŸ¤” é¢„æµ‹ä¸ƒï¼šç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©ï¼ˆé¢è¯•å¿…é—®ä½†ä½ å¯èƒ½æ²¡æ¦‚å¿µï¼‰"></a>ğŸ¤” é¢„æµ‹ä¸ƒï¼šç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©ï¼ˆé¢è¯•å¿…é—®ä½†ä½ å¯èƒ½æ²¡æ¦‚å¿µï¼‰</h2><p>è™½ç„¶ä»Šå¤©ä»£ç é‡Œæ²¡ç›´æ¥æ¶‰åŠï¼Œä½†<strong>é¢è¯•100%ä¼šé—®</strong>ï¼Œæå‰ç»™ä½ é“ºå«ï¼š</p>
<h3 id="ğŸ“Š-ä¸‰å¤§ç¼“å­˜é—®é¢˜å¯¹æ¯”"><a href="#ğŸ“Š-ä¸‰å¤§ç¼“å­˜é—®é¢˜å¯¹æ¯”" class="headerlink" title="ğŸ“Š ä¸‰å¤§ç¼“å­˜é—®é¢˜å¯¹æ¯”"></a>ğŸ“Š ä¸‰å¤§ç¼“å­˜é—®é¢˜å¯¹æ¯”</h3><table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>åœºæ™¯</th>
<th>åæœ</th>
<th>è§£å†³æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ç¼“å­˜ç©¿é€</strong></td>
<td>æŸ¥è¯¢<strong>ä¸å­˜åœ¨</strong>çš„æ•°æ®</td>
<td>æ¯æ¬¡éƒ½æ‰“åˆ°DB</td>
<td>1) ç¼“å­˜ç©ºå€¼ 2) å¸ƒéš†è¿‡æ»¤å™¨</td>
</tr>
<tr>
<td><strong>ç¼“å­˜å‡»ç©¿</strong></td>
<td><strong>çƒ­ç‚¹</strong>æ•°æ®è¿‡æœŸç¬é—´</td>
<td>å¤§é‡è¯·æ±‚æ‰“åˆ°DB</td>
<td>1) çƒ­ç‚¹æ•°æ®ä¸è¿‡æœŸ 2) åˆ†å¸ƒå¼é”</td>
</tr>
<tr>
<td><strong>ç¼“å­˜é›ªå´©</strong></td>
<td>å¤§é‡æ•°æ®<strong>åŒæ—¶</strong>è¿‡æœŸ</td>
<td>DBç¬é—´å‹åŠ›æš´å¢</td>
<td>è¿‡æœŸæ—¶é—´åŠ éšæœºå€¼</td>
</tr>
</tbody></table>
<h3 id="å›¾è§£"><a href="#å›¾è§£" class="headerlink" title="å›¾è§£"></a>å›¾è§£</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    subgraph ç¼“å­˜ç©¿é€</span><br><span class="line">        A1[è¯·æ±‚: dishId=999999&lt;br/&gt;æ ¹æœ¬ä¸å­˜åœ¨] --&gt; A2&#123;ç¼“å­˜æœ‰?&#125;</span><br><span class="line">        A2 --&gt;|æ²¡æœ‰| A3[(DB)]</span><br><span class="line">        A3 --&gt;|æ²¡æœ‰| A4[è¿”å›ç©º]</span><br><span class="line">        A4 --&gt; A5[ä¸‹æ¬¡è¿˜æ˜¯æ‰“DB!]</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    subgraph ç¼“å­˜å‡»ç©¿</span><br><span class="line">        B1[çƒ­ç‚¹å•†å“ç¼“å­˜è¿‡æœŸ] --&gt; B2[1000ä¸ªè¯·æ±‚åŒæ—¶æ¥]</span><br><span class="line">        B2 --&gt; B3[(DBè¢«æ‰“çˆ†)]</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    subgraph ç¼“å­˜é›ªå´©</span><br><span class="line">        C1[å¤§é‡ç¼“å­˜åŒæ—¶è¿‡æœŸ] --&gt; C2[æ‰€æœ‰è¯·æ±‚æ‰“åˆ°DB]</span><br><span class="line">        C2 --&gt; C3[(DBå´©æºƒ)]</span><br><span class="line">    end</span><br></pre></td></tr></table></figure>

<p><strong>æœ¬é¡¹ç›®çš„æ½œåœ¨é—®é¢˜</strong>ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å½“å‰ä»£ç æ²¡æœ‰è®¾ç½®è¿‡æœŸæ—¶é—´ï¼</span></span><br><span class="line">redisTemplate.opsForValue().set(key, list);  <span class="comment">// æ°¸ä¸è¿‡æœŸ</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// æ›´å¥½çš„åšæ³•ï¼š</span></span><br><span class="line">redisTemplate.opsForValue().set(key, list, <span class="number">30</span>, TimeUnit.MINUTES);  <span class="comment">// 30åˆ†é’Ÿè¿‡æœŸ</span></span><br></pre></td></tr></table></figure>

<hr>
<h2 id="ğŸ“-çŸ¥è¯†ç‚¹è‡ªæ£€æ¸…å•"><a href="#ğŸ“-çŸ¥è¯†ç‚¹è‡ªæ£€æ¸…å•" class="headerlink" title="ğŸ“ çŸ¥è¯†ç‚¹è‡ªæ£€æ¸…å•"></a>ğŸ“ çŸ¥è¯†ç‚¹è‡ªæ£€æ¸…å•</h2><p>å­¦å®Œä»Šå¤©çš„å†…å®¹ï¼Œä½ åº”è¯¥èƒ½å›ç­”è¿™äº›é—®é¢˜ï¼š</p>
<table>
<thead>
<tr>
<th>åºå·</th>
<th>é—®é¢˜</th>
<th>èƒ½ç­”ä¸Šæ¥å—ï¼Ÿ</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td><code>(List&lt;DishVO&gt;)</code> å¼ºåˆ¶è½¬æ¢ä¸ºä»€ä¹ˆéœ€è¦ï¼Ÿ</td>
<td>â˜</td>
</tr>
<tr>
<td>2</td>
<td><code>BaseContext.getCurrentId()</code> çš„å€¼æ˜¯è°å­˜è¿›å»çš„ï¼Ÿ</td>
<td>â˜</td>
</tr>
<tr>
<td>3</td>
<td>ThreadLocal çš„ä½œç”¨æ˜¯ä»€ä¹ˆï¼Ÿ</td>
<td>â˜</td>
</tr>
<tr>
<td>4</td>
<td><code>BeanUtils.copyProperties</code> å¹²ä»€ä¹ˆçš„ï¼Ÿ</td>
<td>â˜</td>
</tr>
<tr>
<td>5</td>
<td>MyBatis <code>&lt;where&gt;</code> æ ‡ç­¾çš„ä½œç”¨ï¼Ÿ</td>
<td>â˜</td>
</tr>
<tr>
<td>6</td>
<td>Spring Cache ç”¨ <code>@Cacheable</code> å­˜çš„æ•°æ®åœ¨å“ªé‡Œï¼Ÿ</td>
<td>â˜</td>
</tr>
<tr>
<td>7</td>
<td>ä¸ºä»€ä¹ˆæŸ¥è¯¢æ¡ä»¶ç”¨å¯¹è±¡å°è£…è€Œä¸æ˜¯å¤šå‚æ•°ï¼Ÿ</td>
<td>â˜</td>
</tr>
<tr>
<td>8</td>
<td>ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©åˆ†åˆ«æ˜¯ä»€ä¹ˆï¼Ÿ</td>
<td>â˜</td>
</tr>
</tbody></table>
<hr>
<p>å¥½çš„ï¼æˆ‘æ¥ç»™ä½ æ•´ç†ä¸€ä»½<strong>é¢è¯•å¯¼å‘</strong>çš„é¢˜åº“ï¼Œåˆ†ä¸ºã€ŒåŸºäºé¡¹ç›®çš„é—®é¢˜ã€å’Œã€Œå»¶ä¼¸æ‰©å±•é—®é¢˜ã€ä¸¤ç±»ï¼š</p>
<hr>
<h1 id="ğŸ¯-è‹ç©¹å¤–å–-ç¼“å­˜-è´­ç‰©è½¦æ¨¡å—é¢è¯•é¢˜åº“"><a href="#ğŸ¯-è‹ç©¹å¤–å–-ç¼“å­˜-è´­ç‰©è½¦æ¨¡å—é¢è¯•é¢˜åº“" class="headerlink" title="ğŸ¯ è‹ç©¹å¤–å– - ç¼“å­˜&amp;è´­ç‰©è½¦æ¨¡å—é¢è¯•é¢˜åº“"></a>ğŸ¯ è‹ç©¹å¤–å– - ç¼“å­˜&amp;è´­ç‰©è½¦æ¨¡å—é¢è¯•é¢˜åº“</h1><hr>
<h2 id="ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼“å­˜æ¨¡å—-1"><a href="#ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼“å­˜æ¨¡å—-1" class="headerlink" title="ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼“å­˜æ¨¡å—"></a>ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼“å­˜æ¨¡å—</h2><h3 id="ğŸ“‹-Level-1ï¼šåŸºç¡€é—®é¢˜ï¼ˆå¿…é¡»ç­”ä¸Šæ¥ï¼‰"><a href="#ğŸ“‹-Level-1ï¼šåŸºç¡€é—®é¢˜ï¼ˆå¿…é¡»ç­”ä¸Šæ¥ï¼‰" class="headerlink" title="ğŸ“‹ Level 1ï¼šåŸºç¡€é—®é¢˜ï¼ˆå¿…é¡»ç­”ä¸Šæ¥ï¼‰"></a>ğŸ“‹ Level 1ï¼šåŸºç¡€é—®é¢˜ï¼ˆå¿…é¡»ç­”ä¸Šæ¥ï¼‰</h3><hr>
<h4 id="Q1-ä½ é¡¹ç›®ä¸­-Redis-æ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿ"><a href="#Q1-ä½ é¡¹ç›®ä¸­-Redis-æ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿ" class="headerlink" title="Q1: ä½ é¡¹ç›®ä¸­ Redis æ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿ"></a>Q1: ä½ é¡¹ç›®ä¸­ Redis æ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<blockquote>
<p>é¡¹ç›®ä¸­ Redis ä¸»è¦ç”¨äº<strong>èœå“å’Œå¥—é¤æ•°æ®çš„ç¼“å­˜</strong>ï¼Œé‡‡ç”¨ <strong>Cache Aside Patternï¼ˆæ—è·¯ç¼“å­˜æ¨¡å¼ï¼‰</strong>ï¼š</p>
<ul>
<li><strong>è¯»æ“ä½œ</strong>ï¼šå…ˆæŸ¥Redisï¼Œå‘½ä¸­ç›´æ¥è¿”å›ï¼›æœªå‘½ä¸­æŸ¥MySQLï¼Œå†å†™å…¥Redis</li>
<li><strong>å†™æ“ä½œ</strong>ï¼šå…ˆæ›´æ–°MySQLï¼Œå†åˆ é™¤Redisç¼“å­˜</li>
</ul>
<p>è¿™æ ·åšçš„ç›®çš„æ˜¯<strong>å‡è½»æ•°æ®åº“å‹åŠ›</strong>ï¼Œæå‡æ¥å£å“åº”é€Ÿåº¦ã€‚é«˜å³°æœŸå¤§é‡ç”¨æˆ·æµè§ˆèœå“ï¼Œå¦‚æœæ¯æ¬¡éƒ½æŸ¥åº“ï¼Œæ•°æ®åº“æ‰›ä¸ä½ã€‚</p>
</blockquote>
<p><strong>ğŸ“ å¯¹åº”ä»£ç ä½ç½®</strong>ï¼š</p>
<ul>
<li>user&#x2F;DishController.java - è¯»ç¼“å­˜</li>
<li>admin&#x2F;DishController.java - æ¸…ç¼“å­˜</li>
</ul>
<hr>
<h4 id="Q2-ä½ ç”¨çš„ä»€ä¹ˆæ•°æ®ç»“æ„å­˜å‚¨ç¼“å­˜ï¼ŸKey-æ€ä¹ˆè®¾è®¡çš„ï¼Ÿ"><a href="#Q2-ä½ ç”¨çš„ä»€ä¹ˆæ•°æ®ç»“æ„å­˜å‚¨ç¼“å­˜ï¼ŸKey-æ€ä¹ˆè®¾è®¡çš„ï¼Ÿ" class="headerlink" title="Q2: ä½ ç”¨çš„ä»€ä¹ˆæ•°æ®ç»“æ„å­˜å‚¨ç¼“å­˜ï¼ŸKey æ€ä¹ˆè®¾è®¡çš„ï¼Ÿ"></a>Q2: ä½ ç”¨çš„ä»€ä¹ˆæ•°æ®ç»“æ„å­˜å‚¨ç¼“å­˜ï¼ŸKey æ€ä¹ˆè®¾è®¡çš„ï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<blockquote>
<p>ä½¿ç”¨ Redis çš„ <strong>String ç±»å‹</strong>ï¼Œå­˜å‚¨åºåˆ—åŒ–åçš„ <code>List&lt;DishVO&gt;</code>ã€‚</p>
<p>Key è®¾è®¡è§„åˆ™ï¼š<code>dish_åˆ†ç±»ID</code>ï¼Œä¾‹å¦‚ <code>dish_12</code></p>
<p>è¿™æ ·è®¾è®¡çš„å¥½å¤„ï¼š</p>
<ol>
<li><strong>æŒ‰åˆ†ç±»éš”ç¦»</strong>ï¼šä¸åŒåˆ†ç±»çš„èœå“ç¼“å­˜äº’ä¸å½±å“</li>
<li><strong>ç²¾å‡†æ¸…ç†</strong>ï¼šæ–°å¢èœå“æ—¶åªæ¸…é™¤è¯¥åˆ†ç±»çš„ç¼“å­˜ï¼Œä¸å½±å“å…¶ä»–åˆ†ç±»</li>
</ol>
</blockquote>
<hr>
<h4 id="Q3-é¡¹ç›®ä¸­ç”¨äº†ä¸¤ç§ç¼“å­˜æ–¹å¼ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Q3-é¡¹ç›®ä¸­ç”¨äº†ä¸¤ç§ç¼“å­˜æ–¹å¼ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Q3: é¡¹ç›®ä¸­ç”¨äº†ä¸¤ç§ç¼“å­˜æ–¹å¼ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Q3: é¡¹ç›®ä¸­ç”¨äº†ä¸¤ç§ç¼“å­˜æ–¹å¼ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>å¯¹æ¯”é¡¹</th>
<th>æ‰‹åŠ¨ RedisTemplate</th>
<th>Spring Cache</th>
</tr>
</thead>
<tbody><tr>
<td><strong>é¡¹ç›®åº”ç”¨</strong></td>
<td>èœå“æ¨¡å—</td>
<td>å¥—é¤æ¨¡å—</td>
</tr>
<tr>
<td><strong>ä»£ç ä¾µå…¥æ€§</strong></td>
<td>é«˜ï¼ˆæ··åœ¨ä¸šåŠ¡ä»£ç ä¸­ï¼‰</td>
<td>ä½ï¼ˆæ³¨è§£å£°æ˜å¼ï¼‰</td>
</tr>
<tr>
<td><strong>çµæ´»æ€§</strong></td>
<td>é«˜ï¼ˆå¯ç²¾ç»†æ§åˆ¶ï¼‰</td>
<td>ä¸­</td>
</tr>
<tr>
<td><strong>é€‚ç”¨åœºæ™¯</strong></td>
<td>å¤æ‚ç¼“å­˜é€»è¾‘</td>
<td>æ ‡å‡†CRUD</td>
</tr>
</tbody></table>
<blockquote>
<p>é€‰æ‹©æ‰‹åŠ¨æ–¹å¼æ˜¯å› ä¸ºèœå“æŸ¥è¯¢éœ€è¦æ›´çµæ´»çš„æ§åˆ¶ï¼Œæ¯”å¦‚éœ€è¦å¤„ç†å£å‘³æ•°æ®çš„åµŒå¥—æŸ¥è¯¢ã€‚</p>
</blockquote>
<hr>
<h3 id="ğŸ“‹-Level-2ï¼šè¿›é˜¶è¿½é—®ï¼ˆåŒºåˆ†åº¦é—®é¢˜ï¼‰"><a href="#ğŸ“‹-Level-2ï¼šè¿›é˜¶è¿½é—®ï¼ˆåŒºåˆ†åº¦é—®é¢˜ï¼‰" class="headerlink" title="ğŸ“‹ Level 2ï¼šè¿›é˜¶è¿½é—®ï¼ˆåŒºåˆ†åº¦é—®é¢˜ï¼‰"></a>ğŸ“‹ Level 2ï¼šè¿›é˜¶è¿½é—®ï¼ˆåŒºåˆ†åº¦é—®é¢˜ï¼‰</h3><hr>
<h4 id="Q4-å¦‚æœç®¡ç†å‘˜ä¿®æ”¹äº†èœå“ï¼Œç¼“å­˜é‡Œçš„æ•°æ®ä¸å°±æ˜¯æ—§çš„å—ï¼Ÿæ€ä¹ˆå¤„ç†çš„ï¼Ÿ"><a href="#Q4-å¦‚æœç®¡ç†å‘˜ä¿®æ”¹äº†èœå“ï¼Œç¼“å­˜é‡Œçš„æ•°æ®ä¸å°±æ˜¯æ—§çš„å—ï¼Ÿæ€ä¹ˆå¤„ç†çš„ï¼Ÿ" class="headerlink" title="Q4: å¦‚æœç®¡ç†å‘˜ä¿®æ”¹äº†èœå“ï¼Œç¼“å­˜é‡Œçš„æ•°æ®ä¸å°±æ˜¯æ—§çš„å—ï¼Ÿæ€ä¹ˆå¤„ç†çš„ï¼Ÿ"></a>Q4: å¦‚æœç®¡ç†å‘˜ä¿®æ”¹äº†èœå“ï¼Œç¼“å­˜é‡Œçš„æ•°æ®ä¸å°±æ˜¯æ—§çš„å—ï¼Ÿæ€ä¹ˆå¤„ç†çš„ï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<blockquote>
<p>é‡‡ç”¨<strong>åˆ é™¤ç¼“å­˜</strong>ç­–ç•¥ï¼Œè€Œä¸æ˜¯æ›´æ–°ç¼“å­˜ã€‚</p>
<p>å…·ä½“åšæ³•ï¼š</p>
<ul>
<li><strong>æ–°å¢èœå“</strong>ï¼šåˆ é™¤è¯¥åˆ†ç±»çš„ç¼“å­˜ <code>clearCache(&quot;dish_&quot; + categoryId)</code></li>
<li><strong>ä¿®æ”¹&#x2F;åˆ é™¤&#x2F;èµ·åœå”®</strong>ï¼šåˆ é™¤æ‰€æœ‰èœå“ç¼“å­˜ <code>clearCache(&quot;dish_*&quot;)</code></li>
</ul>
</blockquote>
<p><strong>ğŸ”¥ è¿½é—®</strong>ï¼šä¸ºä»€ä¹ˆæ˜¯åˆ é™¤ç¼“å­˜è€Œä¸æ˜¯æ›´æ–°ç¼“å­˜ï¼Ÿ</p>
<blockquote>
<p>å› ä¸º<strong>æ›´æ–°ç¼“å­˜æœ‰å¹¶å‘é—®é¢˜</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">çº¿ç¨‹Aæ›´æ–°DB â†’ çº¿ç¨‹Bæ›´æ–°DB â†’ çº¿ç¨‹Bæ›´æ–°ç¼“å­˜ â†’ çº¿ç¨‹Aæ›´æ–°ç¼“å­˜</span><br><span class="line">ç»“æœï¼šç¼“å­˜æ˜¯Açš„æ—§æ•°æ®ï¼ŒDBæ˜¯Bçš„æ–°æ•°æ®ï¼Œæ•°æ®ä¸ä¸€è‡´ï¼</span><br></pre></td></tr></table></figure>
<p>åˆ é™¤ç¼“å­˜æ›´å®‰å…¨ï¼Œä¸‹æ¬¡è¯»å–æ—¶è‡ªç„¶ä¼šä»DBåŠ è½½æœ€æ–°æ•°æ®ã€‚</p>
</blockquote>
<hr>
<h4 id="Q5-ä½ äº†è§£ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©å—ï¼Ÿä½ é¡¹ç›®é‡Œæœ‰å¤„ç†å—ï¼Ÿ"><a href="#Q5-ä½ äº†è§£ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©å—ï¼Ÿä½ é¡¹ç›®é‡Œæœ‰å¤„ç†å—ï¼Ÿ" class="headerlink" title="Q5: ä½ äº†è§£ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©å—ï¼Ÿä½ é¡¹ç›®é‡Œæœ‰å¤„ç†å—ï¼Ÿ"></a>Q5: ä½ äº†è§£ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©å—ï¼Ÿä½ é¡¹ç›®é‡Œæœ‰å¤„ç†å—ï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    subgraph ç©¿é€</span><br><span class="line">        A[æŸ¥ä¸å­˜åœ¨çš„æ•°æ®&lt;br/&gt;å¦‚ dishId=999999] --&gt; B[æ¯æ¬¡éƒ½æ‰“DB]</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    subgraph å‡»ç©¿</span><br><span class="line">        C[çƒ­ç‚¹æ•°æ®çªç„¶è¿‡æœŸ] --&gt; D[ç¬é—´å¤§é‡è¯·æ±‚æ‰“DB]</span><br><span class="line">    end</span><br><span class="line">    </span><br><span class="line">    subgraph é›ªå´©</span><br><span class="line">        E[å¤§é‡ç¼“å­˜åŒæ—¶è¿‡æœŸ] --&gt; F[DBç¬é—´å´©æºƒ]</span><br><span class="line">    end</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>é—®é¢˜</th>
<th>æœ¬é¡¹ç›®æƒ…å†µ</th>
<th>ç”Ÿäº§ç¯å¢ƒè§£å†³æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ç©¿é€</strong></td>
<td>æœªå¤„ç†ï¼ˆèœå“IDæ¥è‡ªç³»ç»Ÿï¼Œå¯æ§ï¼‰</td>
<td>ç¼“å­˜ç©ºå€¼ &#x2F; å¸ƒéš†è¿‡æ»¤å™¨</td>
</tr>
<tr>
<td><strong>å‡»ç©¿</strong></td>
<td>æœªè®¾è¿‡æœŸæ—¶é—´ï¼Œä¸å­˜åœ¨æ­¤é—®é¢˜</td>
<td>çƒ­ç‚¹æ•°æ®æ°¸ä¸è¿‡æœŸ &#x2F; åˆ†å¸ƒå¼é”</td>
</tr>
<tr>
<td><strong>é›ªå´©</strong></td>
<td>æœªè®¾è¿‡æœŸæ—¶é—´</td>
<td>è¿‡æœŸæ—¶é—´åŠ éšæœºå€¼</td>
</tr>
</tbody></table>
<blockquote>
<p>æœ¬é¡¹ç›®æ˜¯æ•™å­¦é¡¹ç›®ï¼Œæœªåšå®Œæ•´å¤„ç†ã€‚ç”Ÿäº§ç¯å¢ƒæˆ‘ä¼šè¿™æ ·ä¼˜åŒ–ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è®¾ç½®è¿‡æœŸæ—¶é—´ + éšæœºå€¼ï¼Œé˜²æ­¢é›ªå´©</span></span><br><span class="line"><span class="type">int</span> <span class="variable">timeout</span> <span class="operator">=</span> <span class="number">30</span> + <span class="keyword">new</span> <span class="title class_">Random</span>().nextInt(<span class="number">10</span>); <span class="comment">// 30-40åˆ†é’Ÿ</span></span><br><span class="line">redisTemplate.opsForValue().set(key, list, timeout, TimeUnit.MINUTES);</span><br></pre></td></tr></table></figure>
</blockquote>
<hr>
<h4 id="Q6-Spring-Cache-çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆå‘ï¼Ÿ"><a href="#Q6-Spring-Cache-çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆå‘ï¼Ÿ" class="headerlink" title="Q6: Spring Cache çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆå‘ï¼Ÿ"></a>Q6: Spring Cache çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆå‘ï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<blockquote>
<p><strong>åŸç†</strong>ï¼šåŸºäº <strong>AOP åŠ¨æ€ä»£ç†</strong>ã€‚Spring åœ¨è¿è¡Œæ—¶ä¸ºå¸¦æœ‰ç¼“å­˜æ³¨è§£çš„ Bean åˆ›å»ºä»£ç†å¯¹è±¡ï¼Œåœ¨æ–¹æ³•æ‰§è¡Œå‰åç»‡å…¥ç¼“å­˜é€»è¾‘ã€‚</p>
</blockquote>
<blockquote>
<p><strong>å‘1ï¼šåŒç±»æ–¹æ³•å†…éƒ¨è°ƒç”¨ï¼Œç¼“å­˜å¤±æ•ˆï¼</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SetmealController</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodA</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.methodB();  <span class="comment">// âŒ ä¸èµ°ä»£ç†ï¼Œç¼“å­˜æ³¨è§£å¤±æ•ˆï¼</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="meta">@Cacheable(...)</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">methodB</span><span class="params">()</span> &#123; &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p><strong>å‘2ï¼šprivate æ–¹æ³•åŠ ç¼“å­˜æ³¨è§£æ— æ•ˆ</strong>ï¼ˆä»£ç†æ— æ³•æ‹¦æˆªç§æœ‰æ–¹æ³•ï¼‰</p>
</blockquote>
<hr>
<h4 id="Q7-å¦‚æœè®©ä½ ä¼˜åŒ–è¿™ä¸ªç¼“å­˜æ–¹æ¡ˆï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ"><a href="#Q7-å¦‚æœè®©ä½ ä¼˜åŒ–è¿™ä¸ªç¼“å­˜æ–¹æ¡ˆï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ" class="headerlink" title="Q7: å¦‚æœè®©ä½ ä¼˜åŒ–è¿™ä¸ªç¼“å­˜æ–¹æ¡ˆï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ"></a>Q7: å¦‚æœè®©ä½ ä¼˜åŒ–è¿™ä¸ªç¼“å­˜æ–¹æ¡ˆï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼ˆå±•ç¤ºä½ çš„æŠ€æœ¯æ·±åº¦ï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th>ä¼˜åŒ–ç‚¹</th>
<th>å½“å‰é—®é¢˜</th>
<th>æ”¹è¿›æ–¹æ¡ˆ</th>
</tr>
</thead>
<tbody><tr>
<td><strong>è¿‡æœŸæ—¶é—´</strong></td>
<td>æ°¸ä¸è¿‡æœŸ</td>
<td>è®¾ç½®30åˆ†é’Ÿ+éšæœºå€¼</td>
</tr>
<tr>
<td><strong>ç¼“å­˜é¢„çƒ­</strong></td>
<td>æ— </td>
<td>å¯åŠ¨æ—¶åŠ è½½çƒ­é—¨åˆ†ç±»åˆ°ç¼“å­˜</td>
</tr>
<tr>
<td><strong>ç¼“å­˜ç©¿é€</strong></td>
<td>æ— </td>
<td>ç¼“å­˜ç©ºå€¼æˆ–å¸ƒéš†è¿‡æ»¤å™¨</td>
</tr>
<tr>
<td><strong>ç›‘æ§</strong></td>
<td>æ— </td>
<td>æ¥å…¥ç¼“å­˜å‘½ä¸­ç‡ç›‘æ§</td>
</tr>
<tr>
<td><strong>åºåˆ—åŒ–</strong></td>
<td>JDKåºåˆ—åŒ–</td>
<td>æ”¹ç”¨JSONï¼Œå¯è¯»æ€§æ›´å¥½</td>
</tr>
</tbody></table>
<hr>
<h2 id="ç¬¬äºŒéƒ¨åˆ†ï¼šè´­ç‰©è½¦æ¨¡å—-1"><a href="#ç¬¬äºŒéƒ¨åˆ†ï¼šè´­ç‰©è½¦æ¨¡å—-1" class="headerlink" title="ç¬¬äºŒéƒ¨åˆ†ï¼šè´­ç‰©è½¦æ¨¡å—"></a>ç¬¬äºŒéƒ¨åˆ†ï¼šè´­ç‰©è½¦æ¨¡å—</h2><h3 id="ğŸ“‹-Level-1ï¼šåŸºç¡€é—®é¢˜"><a href="#ğŸ“‹-Level-1ï¼šåŸºç¡€é—®é¢˜" class="headerlink" title="ğŸ“‹ Level 1ï¼šåŸºç¡€é—®é¢˜"></a>ğŸ“‹ Level 1ï¼šåŸºç¡€é—®é¢˜</h3><hr>
<h4 id="Q8-è´­ç‰©è½¦çš„æ ¸å¿ƒåŠŸèƒ½æœ‰å“ªäº›ï¼Ÿæ•°æ®å­˜åœ¨å“ªé‡Œï¼Ÿ"><a href="#Q8-è´­ç‰©è½¦çš„æ ¸å¿ƒåŠŸèƒ½æœ‰å“ªäº›ï¼Ÿæ•°æ®å­˜åœ¨å“ªé‡Œï¼Ÿ" class="headerlink" title="Q8: è´­ç‰©è½¦çš„æ ¸å¿ƒåŠŸèƒ½æœ‰å“ªäº›ï¼Ÿæ•°æ®å­˜åœ¨å“ªé‡Œï¼Ÿ"></a>Q8: è´­ç‰©è½¦çš„æ ¸å¿ƒåŠŸèƒ½æœ‰å“ªäº›ï¼Ÿæ•°æ®å­˜åœ¨å“ªé‡Œï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<blockquote>
<p><strong>å››å¤§åŠŸèƒ½</strong>ï¼šæ·»åŠ è´­ç‰©è½¦ã€æŸ¥çœ‹è´­ç‰©è½¦ã€å‡å°‘å•†å“ã€æ¸…ç©ºè´­ç‰©è½¦</p>
<p><strong>å­˜å‚¨ä½ç½®</strong>ï¼šMySQL æ•°æ®åº“çš„ <code>shopping_cart</code> è¡¨</p>
<p><strong>ä¸ºä»€ä¹ˆç”¨æ•°æ®åº“è€Œä¸æ˜¯ Redisï¼Ÿ</strong></p>
<ul>
<li>æ•°æ®éœ€è¦<strong>æŒä¹…åŒ–</strong>ï¼Œç”¨æˆ·å…³é—­å°ç¨‹åºåè´­ç‰©è½¦æ•°æ®ä»åœ¨</li>
<li>è´­ç‰©è½¦æ•°æ®é‡ä¸å¤§ï¼Œæ•°æ®åº“å®Œå…¨èƒ½æ”¯æ’‘</li>
</ul>
</blockquote>
<hr>
<h4 id="Q9-æ·»åŠ è´­ç‰©è½¦çš„æ ¸å¿ƒé€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿ"><a href="#Q9-æ·»åŠ è´­ç‰©è½¦çš„æ ¸å¿ƒé€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿ" class="headerlink" title="Q9: æ·»åŠ è´­ç‰©è½¦çš„æ ¸å¿ƒé€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿ"></a>Q9: æ·»åŠ è´­ç‰©è½¦çš„æ ¸å¿ƒé€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">flowchart TD</span><br><span class="line">    A[æ¥æ”¶è¯·æ±‚] --&gt; B[è·å–å½“å‰ç”¨æˆ·ID]</span><br><span class="line">    B --&gt; C&#123;è¯¥å•†å“å·²åœ¨è´­ç‰©è½¦?&#125;</span><br><span class="line">    C --&gt;|æ˜¯| D[æ•°é‡+1 UPDATE]</span><br><span class="line">    C --&gt;|å¦| E&#123;æ˜¯èœå“è¿˜æ˜¯å¥—é¤?&#125;</span><br><span class="line">    E --&gt;|èœå“| F[æŸ¥èœå“ä¿¡æ¯]</span><br><span class="line">    E --&gt;|å¥—é¤| G[æŸ¥å¥—é¤ä¿¡æ¯]</span><br><span class="line">    F --&gt; H[INSERTæ–°è®°å½•]</span><br><span class="line">    G --&gt; H</span><br></pre></td></tr></table></figure>

<blockquote>
<p>å…³é”®ç‚¹ï¼š</p>
<ol>
<li>é€šè¿‡ <code>BaseContext.getCurrentId()</code> è·å–ç”¨æˆ·IDï¼Œä¿è¯ç”¨æˆ·éš”ç¦»</li>
<li>åŒä¸€èœå“ä¸åŒå£å‘³æ˜¯<strong>ä¸åŒçš„è®°å½•</strong></li>
<li>å†—ä½™å­˜å‚¨ name&#x2F;image&#x2F;amountï¼Œé¿å…æŸ¥è¯¢æ—¶ JOIN</li>
</ol>
</blockquote>
<hr>
<h4 id="Q10-BaseContext-getCurrentId-æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"><a href="#Q10-BaseContext-getCurrentId-æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ" class="headerlink" title="Q10: BaseContext.getCurrentId() æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ"></a>Q10: BaseContext.getCurrentId() æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼ˆè¿™é¢˜å¿…é—®ï¼ï¼‰ï¼š</p>
<blockquote>
<p>ä½¿ç”¨ <strong>ThreadLocal</strong> å®ç°çº¿ç¨‹éš”ç¦»çš„ç”¨æˆ·IDå­˜å‚¨ã€‚</p>
<p><strong>æµç¨‹</strong>ï¼š</p>
<ol>
<li>ç”¨æˆ·è¯·æ±‚åˆ°è¾¾ â†’ JWTæ‹¦æˆªå™¨è§£æToken â†’ æå–userId</li>
<li>è°ƒç”¨ <code>BaseContext.setCurrentId(userId)</code> å­˜å…¥ThreadLocal</li>
<li>ä¸šåŠ¡ä»£ç è°ƒç”¨ <code>BaseContext.getCurrentId()</code> è·å–</li>
</ol>
<p><strong>ä¸ºä»€ä¹ˆç”¨ThreadLocalï¼Ÿ</strong></p>
<ul>
<li>æ¯ä¸ªè¯·æ±‚æ˜¯ä¸€ä¸ªç‹¬ç«‹çº¿ç¨‹</li>
<li>ThreadLocal ä¿è¯çº¿ç¨‹ä¹‹é—´æ•°æ®éš”ç¦»</li>
<li>é¿å…åœ¨æ–¹æ³•é—´å±‚å±‚ä¼ é€’userIdå‚æ•°</li>
</ul>
</blockquote>
<hr>
<h3 id="ğŸ“‹-Level-2ï¼šè¿›é˜¶è¿½é—®"><a href="#ğŸ“‹-Level-2ï¼šè¿›é˜¶è¿½é—®" class="headerlink" title="ğŸ“‹ Level 2ï¼šè¿›é˜¶è¿½é—®"></a>ğŸ“‹ Level 2ï¼šè¿›é˜¶è¿½é—®</h3><hr>
<h4 id="Q11-ThreadLocal-ä¼šæœ‰å†…å­˜æ³„æ¼é—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"><a href="#Q11-ThreadLocal-ä¼šæœ‰å†…å­˜æ³„æ¼é—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ" class="headerlink" title="Q11: ThreadLocal ä¼šæœ‰å†…å­˜æ³„æ¼é—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ"></a>Q11: ThreadLocal ä¼šæœ‰å†…å­˜æ³„æ¼é—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<blockquote>
<p><strong>ä¼šï¼</strong> å¦‚æœçº¿ç¨‹æ˜¯çº¿ç¨‹æ± å¤ç”¨çš„ï¼ŒThreadLocal ä¸æ‰‹åŠ¨æ¸…ç†ä¼šå¯¼è‡´ï¼š</p>
<ol>
<li>å†…å­˜æ³„æ¼ï¼ˆEntryçš„Valueæ— æ³•å›æ”¶ï¼‰</li>
<li>æ•°æ®é”™ä¹±ï¼ˆä¸‹ä¸€ä¸ªè¯·æ±‚æ‹¿åˆ°ä¸Šä¸€ä¸ªç”¨æˆ·çš„IDï¼‰</li>
</ol>
</blockquote>
<blockquote>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼šè¯·æ±‚ç»“æŸåè°ƒç”¨ <code>ThreadLocal.remove()</code></p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åœ¨æ‹¦æˆªå™¨çš„ afterCompletion ä¸­æ¸…ç†</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">afterCompletion</span><span class="params">(...)</span> &#123;</span><br><span class="line">    BaseContext.removeCurrentId();  <span class="comment">// æ¸…ç†ThreadLocal</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>ğŸ“ æ£€æŸ¥é¡¹ç›®ä»£ç </strong>ï¼š <strong>ğŸ“ æ£€æŸ¥é¡¹ç›®ä»£ç </strong>ï¼š </p>
<p>æœç´¢æ–‡æœ¬ <code>afterCompletion</code>ï¼Œæ— ç»“æœ</p>
<blockquote>
<p>âš ï¸ <strong>æœ¬é¡¹ç›®å­˜åœ¨éšæ‚£</strong>ï¼šæ²¡æœ‰åœ¨æ‹¦æˆªå™¨ä¸­æ¸…ç†ThreadLocalï¼</p>
<p>é¢è¯•æ—¶å¯ä»¥ä¸»åŠ¨æŒ‡å‡ºï¼šâ€æˆ‘æ³¨æ„åˆ°é¡¹ç›®ä¸­æ²¡æœ‰æ¸…ç†ThreadLocalï¼Œåœ¨ä½¿ç”¨çº¿ç¨‹æ± çš„ç”Ÿäº§ç¯å¢ƒå¯èƒ½ä¼šæœ‰é—®é¢˜ï¼Œæˆ‘ä¼šåœ¨ <code>afterCompletion</code> ä¸­æ·»åŠ æ¸…ç†é€»è¾‘ã€‚â€</p>
</blockquote>
<hr>
<h4 id="Q12-åŒä¸€èœå“ä¸åŒå£å‘³æ€ä¹ˆåŒºåˆ†çš„ï¼Ÿ"><a href="#Q12-åŒä¸€èœå“ä¸åŒå£å‘³æ€ä¹ˆåŒºåˆ†çš„ï¼Ÿ" class="headerlink" title="Q12: åŒä¸€èœå“ä¸åŒå£å‘³æ€ä¹ˆåŒºåˆ†çš„ï¼Ÿ"></a>Q12: åŒä¸€èœå“ä¸åŒå£å‘³æ€ä¹ˆåŒºåˆ†çš„ï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<blockquote>
<p>å£å‘³ <code>dish_flavor</code> æ˜¯æŸ¥è¯¢æ¡ä»¶ä¹‹ä¸€ï¼Œæ‰€ä»¥â€å®«ä¿é¸¡ä¸-ä¸è¾£â€å’Œâ€å®«ä¿é¸¡ä¸-å¾®è¾£â€æ˜¯<strong>ä¸¤æ¡ä¸åŒçš„è´­ç‰©è½¦è®°å½•</strong>ã€‚</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;list&quot;</span>&gt;</span></span><br><span class="line">    select * from shopping_cart</span><br><span class="line">    <span class="tag">&lt;<span class="name">where</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;userId!=null&quot;</span>&gt;</span>and user_id=#&#123;userId&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;dishId!=null&quot;</span>&gt;</span>and dish_id=#&#123;dishId&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">if</span> <span class="attr">test</span>=<span class="string">&quot;dishFlavor!=null&quot;</span>&gt;</span>and dish_flavor=#&#123;dishFlavor&#125;<span class="tag">&lt;/<span class="name">if</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">where</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br></pre></td></tr></table></figure>

<hr>
<h4 id="Q13-è´­ç‰©è½¦è¡¨ä¸ºä»€ä¹ˆè¦å†—ä½™å­˜å‚¨-nameã€imageã€amountï¼Ÿ"><a href="#Q13-è´­ç‰©è½¦è¡¨ä¸ºä»€ä¹ˆè¦å†—ä½™å­˜å‚¨-nameã€imageã€amountï¼Ÿ" class="headerlink" title="Q13: è´­ç‰©è½¦è¡¨ä¸ºä»€ä¹ˆè¦å†—ä½™å­˜å‚¨ nameã€imageã€amountï¼Ÿ"></a>Q13: è´­ç‰©è½¦è¡¨ä¸ºä»€ä¹ˆè¦å†—ä½™å­˜å‚¨ nameã€imageã€amountï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<blockquote>
<p><strong>ç©ºé—´æ¢æ—¶é—´</strong>ï¼</p>
<ul>
<li><strong>ä¸å†—ä½™</strong>ï¼šæŸ¥çœ‹è´­ç‰©è½¦éœ€è¦ JOIN èœå“è¡¨&#x2F;å¥—é¤è¡¨ï¼ŒæŸ¥è¯¢æ…¢</li>
<li><strong>å†—ä½™å</strong>ï¼šä¸€æ¡SQLå°±èƒ½æŸ¥å‡ºæ‰€æœ‰å±•ç¤ºä¿¡æ¯</li>
</ul>
</blockquote>
<blockquote>
<p><strong>è¿½é—®</strong>ï¼šå¦‚æœèœå“æ”¹åäº†æ€ä¹ˆåŠï¼Ÿ</p>
<p>è´­ç‰©è½¦é‡Œè¿˜æ˜¯æ—§åå­—ï¼Œä½†è¿™<strong>ç¬¦åˆä¸šåŠ¡é€»è¾‘</strong>â€”â€”ç”¨æˆ·åŠ å…¥æ—¶æ˜¯é‚£ä¸ªåå­—ã€‚å¦‚æœéœ€è¦åŒæ­¥ï¼Œå¯ä»¥åœ¨èœå“ä¿®æ”¹æ—¶æ¸…ç©ºç›¸å…³è´­ç‰©è½¦ï¼ˆæœ¬é¡¹ç›®æ²¡åšï¼‰ã€‚</p>
</blockquote>
<hr>
<h4 id="Q14-å¦‚æœç”¨-Redis-å­˜è´­ç‰©è½¦ï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡ï¼Ÿ"><a href="#Q14-å¦‚æœç”¨-Redis-å­˜è´­ç‰©è½¦ï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡ï¼Ÿ" class="headerlink" title="Q14: å¦‚æœç”¨ Redis å­˜è´­ç‰©è½¦ï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡ï¼Ÿ"></a>Q14: å¦‚æœç”¨ Redis å­˜è´­ç‰©è½¦ï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡ï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼ˆå±•ç¤ºè®¾è®¡èƒ½åŠ›ï¼‰ï¼š</p>
<blockquote>
<p>ä½¿ç”¨ <strong>Hash</strong> æ•°æ®ç»“æ„ï¼š</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Key:    cart:ç”¨æˆ·ID           (å¦‚ cart:1001)</span><br><span class="line">Field:  èœå“ID:å£å‘³           (å¦‚ dish_10:ä¸è¾£)</span><br><span class="line">Value:  JSON&#123;name,image,amount,number&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">flowchart LR</span><br><span class="line">    subgraph Redis Hash</span><br><span class="line">        A[&quot;cart:1001&quot;] --&gt; B[&quot;dish_10:ä¸è¾£ â†’ &#123;name:&#x27;å®«ä¿é¸¡ä¸&#x27;,num:2&#125;&quot;]</span><br><span class="line">        A --&gt; C[&quot;dish_12:å¾®è¾£ â†’ &#123;name:&#x27;é±¼é¦™è‚‰ä¸&#x27;,num:1&#125;&quot;]</span><br><span class="line">        A --&gt; D[&quot;setmeal_5 â†’ &#123;name:&#x27;åŒäººå¥—é¤&#x27;,num:1&#125;&quot;]</span><br><span class="line">    end</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>ä¼˜åŠ¿</strong>ï¼š</p>
<ul>
<li>å•ä¸ªç”¨æˆ·çš„è´­ç‰©è½¦æ˜¯ä¸€ä¸ªKeyï¼Œæ–¹ä¾¿æ•´ä½“æ“ä½œ</li>
<li>Hashçš„HGET&#x2F;HSETæ˜¯O(1)å¤æ‚åº¦</li>
<li>å¯è®¾ç½®è¿‡æœŸæ—¶é—´ï¼ˆå¦‚7å¤©æœªæ“ä½œè‡ªåŠ¨æ¸…ç©ºï¼‰</li>
</ul>
</blockquote>
<hr>
<h4 id="Q15-æ·»åŠ è´­ç‰©è½¦æœ‰å¹¶å‘é—®é¢˜å—ï¼Ÿæ¯”å¦‚ç”¨æˆ·å¿«é€Ÿç‚¹å‡»ä¸¤æ¬¡ï¼Ÿ"><a href="#Q15-æ·»åŠ è´­ç‰©è½¦æœ‰å¹¶å‘é—®é¢˜å—ï¼Ÿæ¯”å¦‚ç”¨æˆ·å¿«é€Ÿç‚¹å‡»ä¸¤æ¬¡ï¼Ÿ" class="headerlink" title="Q15: æ·»åŠ è´­ç‰©è½¦æœ‰å¹¶å‘é—®é¢˜å—ï¼Ÿæ¯”å¦‚ç”¨æˆ·å¿«é€Ÿç‚¹å‡»ä¸¤æ¬¡ï¼Ÿ"></a>Q15: æ·»åŠ è´­ç‰©è½¦æœ‰å¹¶å‘é—®é¢˜å—ï¼Ÿæ¯”å¦‚ç”¨æˆ·å¿«é€Ÿç‚¹å‡»ä¸¤æ¬¡ï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<blockquote>
<p><strong>æœ‰ï¼</strong> å¦‚æœç”¨æˆ·å¿«é€Ÿç‚¹å‡»ä¸¤æ¬¡â€åŠ å…¥è´­ç‰©è½¦â€ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">çº¿ç¨‹1: æŸ¥è¯¢è´­ç‰©è½¦ â†’ ä¸å­˜åœ¨ â†’ å‡†å¤‡INSERT</span><br><span class="line">çº¿ç¨‹2: æŸ¥è¯¢è´­ç‰©è½¦ â†’ ä¸å­˜åœ¨ â†’ å‡†å¤‡INSERT</span><br><span class="line">çº¿ç¨‹1: INSERTæˆåŠŸ</span><br><span class="line">çº¿ç¨‹2: INSERTæˆåŠŸï¼ˆé‡å¤æ•°æ®ï¼ï¼‰</span><br></pre></td></tr></table></figure>
</blockquote>
<blockquote>
<p><strong>è§£å†³æ–¹æ¡ˆ</strong>ï¼š</p>
<ol>
<li><strong>æ•°æ®åº“å”¯ä¸€ç´¢å¼•</strong>ï¼š<code>UNIQUE(user_id, dish_id, dish_flavor)</code></li>
<li><strong>åˆ†å¸ƒå¼é”</strong>ï¼šRedisson</li>
<li><strong>ä¹è§‚é”</strong>ï¼šversionå­—æ®µ</li>
</ol>
</blockquote>
<blockquote>
<p>æœ¬é¡¹ç›®æ²¡å¤„ç†ï¼Œå› ä¸ºæ˜¯æ•™å­¦é¡¹ç›®ã€‚ç”Ÿäº§ç¯å¢ƒå»ºè®®åŠ å”¯ä¸€ç´¢å¼•ã€‚</p>
</blockquote>
<hr>
<h2 id="ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»¼åˆæ‰©å±•é—®é¢˜"><a href="#ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»¼åˆæ‰©å±•é—®é¢˜" class="headerlink" title="ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»¼åˆæ‰©å±•é—®é¢˜"></a>ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»¼åˆæ‰©å±•é—®é¢˜</h2><hr>
<h4 id="Q16-é¡¹ç›®ä¸­ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ"><a href="#Q16-é¡¹ç›®ä¸­ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ" class="headerlink" title="Q16: é¡¹ç›®ä¸­ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ"></a>Q16: é¡¹ç›®ä¸­ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<table>
<thead>
<tr>
<th>è®¾è®¡æ¨¡å¼</th>
<th>åº”ç”¨ä½ç½®</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ä»£ç†æ¨¡å¼</strong></td>
<td>Spring Cacheã€AOP</td>
<td>åŠ¨æ€ä»£ç†å®ç°ç¼“å­˜ç»‡å…¥</td>
</tr>
<tr>
<td><strong>å·¥å‚æ¨¡å¼</strong></td>
<td>Spring Beanåˆ›å»º</td>
<td>BeanFactory</td>
</tr>
<tr>
<td><strong>å•ä¾‹æ¨¡å¼</strong></td>
<td>Spring Beané»˜è®¤ä½œç”¨åŸŸ</td>
<td>Controller&#x2F;Serviceéƒ½æ˜¯å•ä¾‹</td>
</tr>
<tr>
<td><strong>å»ºé€ è€…æ¨¡å¼</strong></td>
<td><code>ShoppingCart.builder()</code></td>
<td>Lombokçš„@Builder</td>
</tr>
<tr>
<td><strong>æ¨¡æ¿æ–¹æ³•</strong></td>
<td>JdbcTemplateã€RedisTemplate</td>
<td>å®šä¹‰æ“ä½œéª¨æ¶</td>
</tr>
</tbody></table>
<hr>
<h4 id="Q17-é¡¹ç›®ä¸­çš„-DTOã€VOã€Entity-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"><a href="#Q17-é¡¹ç›®ä¸­çš„-DTOã€VOã€Entity-æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ" class="headerlink" title="Q17: é¡¹ç›®ä¸­çš„ DTOã€VOã€Entity æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ"></a>Q17: é¡¹ç›®ä¸­çš„ DTOã€VOã€Entity æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">flowchart LR</span><br><span class="line">    A[å‰ç«¯] --&gt;|&quot;DTO&lt;br/&gt;Data Transfer Object&quot;| B[Controller]</span><br><span class="line">    B --&gt; C[Service]</span><br><span class="line">    C --&gt;|&quot;Entity&lt;br/&gt;æ•°æ®åº“å®ä½“&quot;| D[Mapper]</span><br><span class="line">    D --&gt; E[(MySQL)]</span><br><span class="line">    </span><br><span class="line">    C --&gt;|&quot;VO&lt;br/&gt;View Object&quot;| B</span><br><span class="line">    B --&gt; A</span><br></pre></td></tr></table></figure>

<table>
<thead>
<tr>
<th>ç±»å‹</th>
<th>ç”¨é€”</th>
<th>ç¤ºä¾‹</th>
</tr>
</thead>
<tbody><tr>
<td><strong>DTO</strong></td>
<td>æ¥æ”¶å‰ç«¯å‚æ•°</td>
<td>ShoppingCartDTOï¼ˆåªæœ‰dishIdã€setmealIdã€flavorï¼‰</td>
</tr>
<tr>
<td><strong>Entity</strong></td>
<td>å¯¹åº”æ•°æ®åº“è¡¨</td>
<td>ShoppingCartï¼ˆå…¨éƒ¨å­—æ®µï¼‰</td>
</tr>
<tr>
<td><strong>VO</strong></td>
<td>è¿”å›ç»™å‰ç«¯</td>
<td>DishVOï¼ˆå¯èƒ½åŒ…å«åµŒå¥—çš„flavoråˆ—è¡¨ï¼‰</td>
</tr>
</tbody></table>
<hr>
<h4 id="Q18-å¦‚æœè®©ä½ åšè¿™ä¸ªé¡¹ç›®çš„æ€§èƒ½ä¼˜åŒ–ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ"><a href="#Q18-å¦‚æœè®©ä½ åšè¿™ä¸ªé¡¹ç›®çš„æ€§èƒ½ä¼˜åŒ–ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ" class="headerlink" title="Q18: å¦‚æœè®©ä½ åšè¿™ä¸ªé¡¹ç›®çš„æ€§èƒ½ä¼˜åŒ–ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ"></a>Q18: å¦‚æœè®©ä½ åšè¿™ä¸ªé¡¹ç›®çš„æ€§èƒ½ä¼˜åŒ–ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ</h4><p>âœ… <strong>æ ‡å‡†ç­”æ¡ˆ</strong>ï¼ˆç»¼åˆèƒ½åŠ›å±•ç¤ºï¼‰ï¼š</p>
<table>
<thead>
<tr>
<th>å±‚çº§</th>
<th>ä¼˜åŒ–ç‚¹</th>
<th>å…·ä½“æªæ–½</th>
</tr>
</thead>
<tbody><tr>
<td><strong>ç¼“å­˜å±‚</strong></td>
<td>ç¼“å­˜é¢„çƒ­</td>
<td>å¯åŠ¨æ—¶åŠ è½½çƒ­é—¨æ•°æ®</td>
</tr>
<tr>
<td><strong>ç¼“å­˜å±‚</strong></td>
<td>å¤šçº§ç¼“å­˜</td>
<td>æœ¬åœ°ç¼“å­˜(Caffeine) + Redis</td>
</tr>
<tr>
<td><strong>æ•°æ®åº“å±‚</strong></td>
<td>ç´¢å¼•ä¼˜åŒ–</td>
<td>ç»™é«˜é¢‘æŸ¥è¯¢å­—æ®µåŠ ç´¢å¼•</td>
</tr>
<tr>
<td><strong>æ•°æ®åº“å±‚</strong></td>
<td>è¯»å†™åˆ†ç¦»</td>
<td>ä¸»åº“å†™ã€ä»åº“è¯»</td>
</tr>
<tr>
<td><strong>æ¥å£å±‚</strong></td>
<td>æ¥å£åˆå¹¶</td>
<td>å‡å°‘HTTPè¯·æ±‚æ¬¡æ•°</td>
</tr>
<tr>
<td><strong>ä»£ç å±‚</strong></td>
<td>å¼‚æ­¥å¤„ç†</td>
<td>æ—¥å¿—ã€é€šçŸ¥ç­‰éæ ¸å¿ƒé€»è¾‘å¼‚æ­¥åŒ–</td>
</tr>
</tbody></table>
<hr>
<h2 id="ğŸ“-é¢è¯•æ¨¡æ‹Ÿ-è¿ç¯è¿½é—®"><a href="#ğŸ“-é¢è¯•æ¨¡æ‹Ÿ-è¿ç¯è¿½é—®" class="headerlink" title="ğŸ“ é¢è¯•æ¨¡æ‹Ÿ - è¿ç¯è¿½é—®"></a>ğŸ“ é¢è¯•æ¨¡æ‹Ÿ - è¿ç¯è¿½é—®</h2><p>é¢è¯•å®˜å¯èƒ½è¿™æ ·é—®ä½ ï¼š</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">é¢è¯•å®˜ï¼šä½ é¡¹ç›®ä¸­ç”¨äº†Redisï¼Œè¯´è¯´æ€ä¹ˆç”¨çš„ï¼Ÿ</span><br><span class="line">ä½ ï¼šç”¨äºèœå“ç¼“å­˜...ï¼ˆQ1ç­”æ¡ˆï¼‰</span><br><span class="line"></span><br><span class="line">é¢è¯•å®˜ï¼šé‚£ç¼“å­˜å’Œæ•°æ®åº“æ•°æ®ä¸ä¸€è‡´æ€ä¹ˆåŠï¼Ÿ</span><br><span class="line">ä½ ï¼šé‡‡ç”¨åˆ é™¤ç¼“å­˜ç­–ç•¥...ï¼ˆQ4ç­”æ¡ˆï¼‰</span><br><span class="line"></span><br><span class="line">é¢è¯•å®˜ï¼šä¸ºä»€ä¹ˆæ˜¯åˆ é™¤è€Œä¸æ˜¯æ›´æ–°ï¼Ÿ</span><br><span class="line">ä½ ï¼šå› ä¸ºæ›´æ–°æœ‰å¹¶å‘é—®é¢˜...ï¼ˆQ4è¿½é—®ç­”æ¡ˆï¼‰</span><br><span class="line"></span><br><span class="line">é¢è¯•å®˜ï¼šä½ äº†è§£ç¼“å­˜ç©¿é€å—ï¼Ÿä½ é¡¹ç›®é‡Œæœ‰å¤„ç†å—ï¼Ÿ</span><br><span class="line">ä½ ï¼šäº†è§£ï¼Œä½†æœ¬é¡¹ç›®æ²¡å¤„ç†...ç”Ÿäº§ç¯å¢ƒä¼šç”¨å¸ƒéš†è¿‡æ»¤å™¨...ï¼ˆQ5ç­”æ¡ˆï¼‰</span><br><span class="line"></span><br><span class="line">é¢è¯•å®˜ï¼šå—¯ï¼Œé‚£è¯´è¯´è´­ç‰©è½¦æ€ä¹ˆå®ç°çš„ï¼Ÿ</span><br><span class="line">ä½ ï¼š...ï¼ˆQ9ç­”æ¡ˆï¼‰</span><br><span class="line"></span><br><span class="line">é¢è¯•å®˜ï¼šç”¨æˆ·IDæ˜¯æ€ä¹ˆè·å–çš„ï¼Ÿ</span><br><span class="line">ä½ ï¼šThreadLocal...ï¼ˆQ10ç­”æ¡ˆï¼‰</span><br><span class="line"></span><br><span class="line">é¢è¯•å®˜ï¼šThreadLocalæœ‰ä»€ä¹ˆé—®é¢˜å—ï¼Ÿ</span><br><span class="line">ä½ ï¼šæœ‰å†…å­˜æ³„æ¼é£é™©...ï¼ˆQ11ç­”æ¡ˆï¼‰</span><br><span class="line"></span><br><span class="line">é¢è¯•å®˜ï¼šä¸é”™ï¼Œé‚£å¦‚æœè®©ä½ ä¼˜åŒ–è¿™ä¸ªé¡¹ç›®ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ</span><br><span class="line">ä½ ï¼š...ï¼ˆQ18ç­”æ¡ˆï¼‰</span><br></pre></td></tr></table></figure>

<hr>
<h2 id="âœ…-è‡ªæ£€æ¸…å•"><a href="#âœ…-è‡ªæ£€æ¸…å•" class="headerlink" title="âœ… è‡ªæ£€æ¸…å•"></a>âœ… è‡ªæ£€æ¸…å•</h2><table>
<thead>
<tr>
<th>åºå·</th>
<th>é—®é¢˜</th>
<th>èƒ½æµç•…å›ç­”ï¼Ÿ</th>
</tr>
</thead>
<tbody><tr>
<td>1</td>
<td>Redisåœ¨é¡¹ç›®ä¸­çš„åº”ç”¨</td>
<td>â˜</td>
</tr>
<tr>
<td>2</td>
<td>Cache Aside Pattern</td>
<td>â˜</td>
</tr>
<tr>
<td>3</td>
<td>ä¸ºä»€ä¹ˆåˆ é™¤ç¼“å­˜è€Œä¸æ˜¯æ›´æ–°</td>
<td>â˜</td>
</tr>
<tr>
<td>4</td>
<td>ç¼“å­˜ç©¿é€&#x2F;å‡»ç©¿&#x2F;é›ªå´©</td>
<td>â˜</td>
</tr>
<tr>
<td>5</td>
<td>Spring CacheåŸç†å’Œå‘</td>
<td>â˜</td>
</tr>
<tr>
<td>6</td>
<td>ThreadLocalåŸç†å’Œå†…å­˜æ³„æ¼</td>
<td>â˜</td>
</tr>
<tr>
<td>7</td>
<td>è´­ç‰©è½¦æ·»åŠ é€»è¾‘</td>
<td>â˜</td>
</tr>
<tr>
<td>8</td>
<td>å£å‘³åŒºåˆ†å®ç°</td>
<td>â˜</td>
</tr>
<tr>
<td>9</td>
<td>å†—ä½™å­—æ®µè®¾è®¡åŸå› </td>
<td>â˜</td>
</tr>
<tr>
<td>10</td>
<td>DTO&#x2F;VO&#x2F;EntityåŒºåˆ«</td>
<td>â˜</td>
</tr>
</tbody></table>
<hr>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="https://Lin-sist.github.io">Lin</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://lin-sist.github.io/2026/01/29/Day07%E6%80%BB%E7%BB%93/">https://lin-sist.github.io/2026/01/29/Day07%E6%80%BB%E7%BB%93/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥æº <a href="https://Lin-sist.github.io" target="_blank">Linè¯´</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E4%B8%80%E5%88%B7%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96/">ä¸€åˆ·è‹ç©¹å¤–å–</a></div><div class="post-share"><div class="social-share" data-image="/img/Lin.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><a class="pagination-related" href="/2026/01/29/Day07-01%E5%88%B012%E3%80%8A%E7%BC%93%E5%AD%98%E5%8A%9F%E8%83%BD%E3%80%8B/" title="Day07-01åˆ°12ã€Šç¼“å­˜åŠŸèƒ½ã€‹"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info"><div class="info-1"><div class="info-item-1">ä¸Šä¸€ç¯‡</div><div class="info-item-2">Day07-01åˆ°12ã€Šç¼“å­˜åŠŸèƒ½ã€‹</div></div><div class="info-2"><div class="info-item-1">ğŸ¥ Day07-01åˆ°05 ç¼“å­˜èœå“ğŸ§© æœ¬èŠ‚æ¦‚è¿° ä¸€å¥è¯æ€»ç»“ï¼š    ä¸»è¦å†…å®¹å…³é”®è¯ï¼šRedisç¼“å­˜ã€SpringCacheã€ &#96;&#96;  ğŸ§  æ¨¡å—ç›®æ ‡ å°ç¨‹åºå±•ç¤ºèœå“æ•°æ®æ˜¯é€šè¿‡æ•°æ®åº“è·å¾—ï¼Œè‹¥ç”¨æˆ·ç«¯è®¿é—®é‡å¤§ï¼Œæ•°æ®åº“è®¿é—®å‹åŠ›éšä¹‹å¢å¤§ é€šè¿‡Redisç¼“å­˜èœå“æ•°æ®ï¼Œå‡å°‘æ•°æ®åº“æŸ¥è¯¢æ“ä½œ   ğŸ”„ å®ç°æµç¨‹ ç”¨æˆ·å°ç¨‹åºæŸ¥è¯¢èœå“æ•°æ® åˆ°è¾¾åç«¯æœåŠ¡ï¼Œå…ˆåˆ¤æ–­ç¼“å­˜æ˜¯å¦æœ‰èœå“æ•°æ® æœ‰ç¼“å­˜æ•°æ® -&gt; è¯»å–ç¼“å­˜æ•°æ® æ²¡æœ‰ç¼“å­˜æ•°æ® -&gt; æŸ¥è¯¢æ•°æ®åº“å¹¶å“åº” -&gt; å°†æ•°æ®è½½å…¥ç¼“å­˜   ğŸ”„ ç¼“å­˜é€»è¾‘ æ¯ä¸ªåˆ†ç±»ä¸‹çš„èœå“ä¿å­˜ä¸€ä»½ç¼“å­˜æ•°æ®ï¼Œå°†åˆ†ç±»ä½œä¸ºkeyï¼Œèœå“è½¬ä¸ºStringä½œä¸ºvalueï¼› æ•°æ®åº“ä¸­èœå“æœ‰å˜æ›´æ—¶è¦æ¸…ç†ç¼“å­˜æ•°æ®   ğŸ“˜ å­¦åˆ°çš„çŸ¥è¯†ğŸ“š Part 1: æ³¨è§£åŸºç¡€æ¶è¡¥ä»£ç é‡Œçš„æ³¨è§£åˆ†æˆä¸‰ç±»ï¼š ğŸŸ¢ Spring æ¡†æ¶æ³¨è§£ï¼ˆå¿…é¡»æŒæ¡ï¼‰   æ³¨è§£ æ¥æº ä½œç”¨ é€šä¿—ç†è§£    @RestController Spring MVC æ ‡è®°è¿™æ˜¯ä¸€ä¸ªæ§åˆ¶å™¨ï¼Œä¸”è¿”å›å€¼è‡ªåŠ¨è½¬JSON å‘Šè¯‰Springï¼šâ€æˆ‘æ˜¯ä¸ªæ¥å¾…å‘˜ï¼Œå®¢äºº(è¯·æ±‚)æ¥äº†æˆ‘å¤„ç†ï¼Œç»“æœç”¨JSONæ ¼å¼å›å¤â€   @Reque...</div></div></div></a><a class="pagination-related" href="/2026/01/25/%E3%80%8A%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96%E3%80%8B%E8%A7%A3%E5%86%B3%E5%BE%AE%E4%BF%A1%E7%99%BB%E5%BD%95%E6%A8%A1%E5%9D%97/" title="ã€Šè‹ç©¹å¤–å–ã€‹è§£å†³å¾®ä¿¡ç™»å½•æ¨¡å—"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-right"><div class="info-1"><div class="info-item-1">ä¸‹ä¸€ç¯‡</div><div class="info-item-2">ã€Šè‹ç©¹å¤–å–ã€‹è§£å†³å¾®ä¿¡ç™»å½•æ¨¡å—</div></div><div class="info-2"><div class="info-item-1">1. èƒŒæ™¯å¾®ä¿¡å°ç¨‹åºç‚¹å‡»ç™»å½•åï¼Œloginå¤±è´¥ï¼Œæ— æ³•æ­£å¸¸ç™»å½•ï¼Œæ— æ³•åŠ è½½èœå“é¡µé¢ã€‚ 2. æ­£æ–‡å†…å®¹é—®é¢˜çš„æ ¹æºæ˜¯ï¼š@AutoFill æ³¨è§£æ˜¯ä¸ºç®¡ç†ç«¯çš„å®ä½“ç±»è®¾è®¡çš„ï¼ˆå¦‚ Employeeã€Category ç­‰ï¼‰ï¼Œè¿™äº›å®ä½“ç±»æœ‰ createUser å’Œ updateUser å­—æ®µã€‚ä½† User æ˜¯ Cç«¯ç”¨æˆ·å®ä½“ï¼Œå®ƒæ²¡æœ‰è¿™ä¸¤ä¸ªå­—æ®µã€‚  é—®é¢˜æ ¹æºè¯¦è§£ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  User å®ä½“ç±»åªæœ‰ï¼š                                                       â”‚â”‚  - id, openid, name, phone, sex, idNumber, avatar, createTime          â”‚â”‚                                                                         â”‚â”‚  AutoFillAspect å°è¯•è°ƒç”¨ï¼š         ...</div></div></div></a></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>ç›¸å…³æ¨è</span></div><div class="relatedPosts-list"><a class="pagination-related" href="/2025/12/03/Day03-10%E5%88%B014%E3%80%8A%E8%8F%9C%E5%93%81%E6%9F%A5%E8%AF%A2%E5%92%8C%E5%88%A0%E9%99%A4%E8%8F%9C%E5%93%81%E3%80%8B/" title="Day03-10åˆ°14ã€Šèœå“æŸ¥è¯¢å’Œåˆ é™¤èœå“ã€‹"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-03</div><div class="info-item-2">Day03-10åˆ°14ã€Šèœå“æŸ¥è¯¢å’Œåˆ é™¤èœå“ã€‹</div></div><div class="info-2"><div class="info-item-1">ğŸ¥ dayXX-XX æ¨¡å—åç§°ğŸ§© æœ¬èŠ‚æ¦‚è¿° ä¸€å¥è¯æ€»ç»“ï¼š    ä¸»è¦å†…å®¹å…³é”®è¯ï¼šç±»å1ã€ç±»å2ã€æŠ€æœ¯ç‚¹1  ğŸ§  æ¨¡å—ç›®æ ‡ æ ¹æ®é¡µç å±•ç¤ºèœå“ä¿¡æ¯ æ¯é¡µå±•ç¤º10æ¡æ•°æ® åˆ†é¡µæŸ¥è¯¢æ—¶å¯æ ¹æ®éœ€è¦è¾“å…¥èœå“åç§°ï¼Œèœå“åˆ†ç±»ï¼Œèœå“çŠ¶æ€è¿›è¡ŒæŸ¥è¯¢  åˆ é™¤èœå“  å¯ä»¥ä¸€æ¬¡åˆ é™¤ä¸€ä¸ªèœå“ï¼Œä¹Ÿå¯ä»¥æ‰¹é‡åˆ é™¤ èµ·å”®ä¸­çš„èœå“ä¸èƒ½åˆ é™¤ è¢«å¥—é¤å…³è”çš„èœå“ä¸èƒ½åˆ é™¤ åˆ é™¤èœå“åå…³è”çš„å£å‘³æ•°æ®ä¹Ÿéœ€è¦åˆ é™¤æ‰   ğŸ§° å…³é”®æŠ€æœ¯ &#x2F; ç±»   ç±»å‹ åç§° è¯´æ˜    æ§åˆ¶å±‚ DishController    ä¸šåŠ¡å±‚ DishService, DishServiceImpl    å·¥å…·ç±»     æŠ€æœ¯æ ˆ      ğŸ”„ å®ç°æµç¨‹ DishController -&gt; DishService -&gt; DishServiceImpl -&gt; DishMapperä¾æ¬¡ç¼–å†™æ–¹æ³• ä¸‰ä¸ªè¡¨ï¼šdish, dish_flavor, setmeal_dish      ğŸ“˜ å­¦åˆ°çš„çŸ¥è¯†-  ğŸ—‚ï¸ å…³è”æ–‡ä»¶123456789101112sky-server/src/main/java/com/sky/controller...</div></div></div></a><a class="pagination-related" href="/2025/11/02/Day02/" title="Day02"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-11-02</div><div class="info-item-2">Day02</div></div><div class="info-2"><div class="info-item-1">åˆæœŸç¬”è®°ğŸ”„ å®ç°æµç¨‹ è‡ªå®šä¹‰æ³¨è§£AutoFillï¼Œç”¨äºæ ‡è¯†éœ€è¦å…¬å…±å­—æ®µè‡ªåŠ¨å¡«å……çš„æ–¹æ³•ã€‚ è‡ªå®šä¹‰åˆ‡é¢ç±»AutoFillspectï¼Œç»Ÿä¸€æ‹¦æˆªåŠ å…¥äº†AutoFillçš„æ–¹æ³•ï¼Œé€šè¿‡åå°„ä¸ºå…¬å…±å­—æ®µèµ‹å€¼ã€‚ åœ¨Mapperçš„æ–¹æ³•ä¸ŠåŠ å…¥AutoFillæ³¨è§£.   ğŸ“˜ å­¦åˆ°çš„çŸ¥è¯† æ³¨è§£ï¼šJavaé‡Œçš„ç‰¹æ®Šæ ‡è®°ï¼Œæ¯”å¦‚ @Overrideå’Œ @Test ,ç›®æ ‡æ˜¯ è®©å…¶ä»–ç¨‹åºæ ¹æ®æ³¨è§£ä¿¡æ¯æ¥å†³å®šæ€ä¹ˆæ‰§è¡Œï¼›  è‡ªå®šä¹‰æ³¨è§£ï¼šæ³¨è§£æœ¬è´¨æ˜¯ä¸€ä¸ªç»§æ‰¿annotationçš„æ¥å£ï¼Œå±æ€§æœ¬è´¨æ˜¯æŠ½è±¡æ–¹æ³•ï¼› 12345public @interface æ³¨è§£åç§° &#123;    String name();    int age() default 18;    String value(); //ç‰¹æ®Šå±æ€§value,å¦‚æœæ³¨è§£åªæœ‰ä¸€ä¸ªvalueå±æ€§ï¼Œé‚£ä¹ˆvalueçš„åå­—å¯ä»¥çœç•¥ä¸å†™&#125; å…ƒæ³¨è§£ï¼š**@Targetå£°æ˜è¢«ä¿®é¥°çš„æ³¨è§£åªèƒ½åœ¨å“ªäº›ä½ç½®ä½¿ç”¨ï¼›@Retention**å£°æ˜æ³¨è§£çš„ä¿ç•™å‘¨æœŸï¼›  åå°„ï¼š  æšä¸¾ï¼š  mybatiesï¼š    ğŸ“‹ å‘˜å·¥ç®¡ç†æ¨¡å—å®Œæ•´è§£æä¸€ã€æ•´ä½“ä¸šåŠ¡æµç¨‹å›¾1234567891011121...</div></div></div></a><a class="pagination-related" href="/2025/12/05/Day03-15%E5%88%B018-%E3%80%8A%E4%BF%AE%E6%94%B9%E8%8F%9C%E5%93%81%E3%80%8B/" title="Day03-15åˆ°18 ã€Šä¿®æ”¹èœå“ã€‹"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-05</div><div class="info-item-2">Day03-15åˆ°18 ã€Šä¿®æ”¹èœå“ã€‹</div></div><div class="info-2"><div class="info-item-1">ğŸ¥ dayXX-XX æ¨¡å—åç§°ğŸ§© æœ¬èŠ‚æ¦‚è¿° ä¸€å¥è¯æ€»ç»“ï¼š    ä¸»è¦å†…å®¹å…³é”®è¯ï¼šç±»å1ã€ç±»å2ã€æŠ€æœ¯ç‚¹1  ğŸ§  æ¨¡å—ç›®æ ‡ æ ¹æ®idæŸ¥è¯¢èœå“ æ ¹æ®ç±»å‹æŸ¥è¯¢åˆ†ç±»ï¼ˆå·²å®ç°ï¼‰ æ–‡ä»¶ä¸Šä¼ ï¼ˆå·²å®ç°ï¼‰ ä¿®æ”¹èœå“   ğŸ§° å…³é”®æŠ€æœ¯ &#x2F; ç±»   ç±»å‹ åç§° è¯´æ˜    æ§åˆ¶å±‚     ä¸šåŠ¡å±‚     å·¥å…·ç±»     æŠ€æœ¯æ ˆ      ğŸ”„ å®ç°æµç¨‹ ç¼–å†™æ ¹æ®idæŸ¥è¯¢èœå“çš„æ¥å£ï¼Œæ¶‰åŠcontrollerå±‚ï¼Œserviceå±‚ï¼Œserviceçš„å®ç°å±‚ï¼Œmapperå±‚ã€‚ ç¼–å†™ä¿®æ”¹èœå“æ¥å£ï¼Œéœ€è¦æ“ä½œâ€œèœå“è¡¨â€å’Œâ€œå£å‘³è¡¨â€ï¼Œå› ä¸ºå£å‘³æ˜¯å…³è”èœå“çš„ï¼Œè¿™é‡Œé‡‡â€å…ˆç»Ÿä¸€åˆ é™¤å£å‘³ï¼Œå†æ ¹æ®å½“å‰èœå“æ¥é‡æ–°è®¾ç½®å£å‘³ã€‚â€ ä¿®æ”¹DishMapper.xmlçš„åŠ¨æ€SQL    ğŸ“˜ å­¦åˆ°çš„çŸ¥è¯†-  ğŸ—‚ï¸ å…³è”æ–‡ä»¶12345678910111213sky-server/src/main/java/com/sky/controller/admin/DishController.javasky-pojo/src/main/java/com/sky/vo/DishVO.javasky-server/src/main/ja...</div></div></div></a><a class="pagination-related" href="/2026/01/17/Day05-02%E5%88%B014%E3%80%8A%E5%85%B3%E4%BA%8Eredis%E3%80%8B/" title="Day05-02åˆ°14ã€Šå…³äºredisã€‹"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-17</div><div class="info-item-2">Day05-02åˆ°14ã€Šå…³äºredisã€‹</div></div><div class="info-2"><div class="info-item-1">ğŸ¥ dayXX-XX æ¨¡å—åç§°ğŸ“˜ å­¦åˆ°çš„çŸ¥è¯†Rediså­˜å‚¨çš„æ˜¯key-valueç»“æ„çš„æ•°æ®ï¼Œå…¶ä¸­keyæ˜¯å­—ç¬¦ä¸²ç±»å‹ï¼Œvalueæœ‰5é’Ÿå¸¸ç”¨æ•°æ®ç±»å‹ã€‚ redisçš„æ•°æ®ç±»å‹:  å­—ç¬¦ä¸²String ï¼Œredisä¸­æœ€ç®€å•çš„æ•°æ®ç±»å‹ å“ˆå¸Œ hash ï¼Œç±»ä¼¼Javaçš„HashMapç»“æ„ åˆ—è¡¨ list ï¼ŒæŒ‰ç…§æ’å…¥é¡ºåºæ’åºï¼Œå¯ä»¥æœ‰é‡å¤å…ƒç´ ï¼Œç±»ä¼¼Javaä¸­çš„LinkedList é›†åˆ set ï¼Œ æ— åºé›†åˆï¼Œæ²¡æœ‰é‡å¤å…ƒç´ ï¼Œç±»ä¼¼Javaä¸­çš„HashSet æœ‰åºé›†åˆ sorted set &#x2F; zest ï¼Œ é›†åˆä¸­æ¯ä¸ªå…ƒç´ å…³è”ä¸€ä¸ªåˆ†æ•°ï¼Œæ ¹æ®åˆ†æ•°å‡åºæ’åºï¼Œæ²¡æœ‰é‡å¤å…ƒç´   rediså¸¸ç”¨å‘½ä»¤ å­—ç¬¦ä¸²ç±»å‹ï¼š  SET key value       è®¾ç½®æŒ‡å®škeyçš„å€¼ GET key             è·å–æŒ‡å®škeyçš„å€¼ SETEX key seconds value     è®¾ç½®keyçš„å€¼ï¼Œå¹¶å°†keyçš„è¿‡æœŸæ—¶é—´è®¾ä¸ºsecondsç§’ SETNX key value             åªæœ‰åœ¨keyä¸å­˜åœ¨æ—¶è®¾ç½®keyçš„å€¼  å“ˆå¸Œæ“ä½œå‘½ä»¤ï¼šï¼ˆredis hash æ˜¯stringç±»å‹çš„fi...</div></div></div></a><a class="pagination-related" href="/2025/12/02/Day03-05%E5%88%B009-%E3%80%8A%E6%96%B0%E5%A2%9E%E8%8F%9C%E5%93%81%E3%80%8B/" title="Day03-05åˆ°09 ã€Šæ–°å¢èœå“ã€‹"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2025-12-02</div><div class="info-item-2">Day03-05åˆ°09 ã€Šæ–°å¢èœå“ã€‹</div></div><div class="info-2"><div class="info-item-1">ğŸ¥ dayXX-XX æ¨¡å—åç§°ğŸ§© æœ¬èŠ‚æ¦‚è¿° ä¸€å¥è¯æ€»ç»“ï¼š é€šè¿‡ç¼–å†™ä¸‰ä¸ªæ¥å£åŠç›¸å…³æ–¹æ³•ï¼Œå®ç°å¯¹èœå“çš„æ·»åŠ ä¸Šä¼ å’Œæ›´æ–°ã€‚  ä¸»è¦å†…å®¹å…³é”®è¯ï¼šé˜¿é‡Œäº‘OSS  ğŸ§  æ¨¡å—ç›®æ ‡ èœå“åç§°å”¯ä¸€ èœå“å¿…é¡»å±äºæŸä¸ªåˆ†ç±»ä¸‹ï¼Œä¸èƒ½å•ç‹¬å­˜åœ¨ æ–°å¢èœå“å¯æ ¹æ®æƒ…å†µé€‰æ‹©å£å‘³ æ¯ä¸ªèœå“å¿…é¡»å¯¹åº”ä¸€å¼ å›¾ç‰‡ï¼ˆæµ‹è¯•æ—¶æœªæˆåŠŸï¼Œæ˜¯å¦å’Œé˜¿é‡Œäº‘OSSé…ç½®æ–‡ä»¶å†…å®¹æœ‰å…³ï¼Ÿï¼‰   ğŸ§° å…³é”®æŠ€æœ¯ &#x2F; ç±»   ç±»å‹ åç§° è¯´æ˜    æ§åˆ¶å±‚     ä¸šåŠ¡å±‚     å·¥å…·ç±»     æŠ€æœ¯æ ˆ      æ ¹æ®ç±»å‹æŸ¥è¯¢åˆ†ç±»æ¥å£ï¼ˆå·²å®Œæˆï¼‰ æ–‡ä»¶ä¸Šä¼ æ¥å£ æ–°å¢èœå“æ¥å£   ğŸ”„ å®ç°æµç¨‹ é…ç½®AliOSSæ–‡ä»¶ä¸Šä¼ éœ€è¦çš„ä¿¡æ¯ åˆ›å»ºé…ç½®ç±»OssConfigurationï¼Œç”¨äºåˆ›å»ºAliOssUtilå¯¹è±¡ ç¼–å†™CommonControllerç±»ä¸­æ–‡ä»¶ä¸Šä¼ æ–¹æ³• ç¼–å†™DishControllerç±»ä¸­èœå“ç®¡ç†æ–¹æ³•ï¼Œåˆ›å»ºDishServiceæ¥å£å’ŒDishServiceImlå®ç°ç±» ç¼–å†™å¹¶è°ƒç”¨DishMapperçš„æ–¹æ³•ï¼Œéœ€è¦å…ˆé…ç½®DishMapper.xmlæ–‡ä»¶ å®šä¹‰DishFlavorMapperæ¥å£ï¼Œæ“ä½œå£å‘³è¡¨æ•°æ®ï¼ŒåŒæ ·éœ€é…ç½®xmlæ–‡ä»¶   ...</div></div></div></a><a class="pagination-related" href="/2026/01/17/Day05-15%E5%88%B017%E3%80%8A%E5%BA%97%E9%93%BA%E8%90%A5%E4%B8%9A%E7%8A%B6%E6%80%81%E3%80%8B/" title="Day05-15åˆ°17ã€Šåº—é“ºè¥ä¸šçŠ¶æ€ã€‹"><div class="cover" style="background: var(--default-bg-color)"></div><div class="info text-center"><div class="info-1"><div class="info-item-1"><i class="far fa-calendar-alt fa-fw"></i> 2026-01-17</div><div class="info-item-2">Day05-15åˆ°17ã€Šåº—é“ºè¥ä¸šçŠ¶æ€ã€‹</div></div><div class="info-2"><div class="info-item-1">ğŸ¥ dayXX-XX æ¨¡å—åç§°ğŸ§© æœ¬èŠ‚æ¦‚è¿° ä¸€å¥è¯æ€»ç»“ï¼š    ä¸»è¦å†…å®¹å…³é”®è¯ï¼šâ€redisTemplateâ€,â€@AutoWiredâ€, â€œ@ApiOperationâ€  ğŸ§  æ¨¡å—ç›®æ ‡ä¿®æ”¹è¥ä¸šçŠ¶æ€  è¥ä¸šï¼šè‡ªåŠ¨æ¥æ”¶ä»»ä½•è®¢å•ï¼Œå¯ç‚¹å‡»â€œæ‰“çƒŠâ€è®©åº—é“ºè¿›å…¥æ‰“çƒŠçŠ¶æ€ æ‰“çƒŠï¼šä¸æ¥å—ä»»ä½•è®¢å•ï¼Œå¯ç‚¹å‡»è¥ä¸šæ‰‹åŠ¨æ¢å¤è¥ä¸šçŠ¶æ€   æ¥å£   è®¾ç½®è¥ä¸šçŠ¶æ€ ç®¡ç†ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€ ç”¨æˆ·ç«¯æŸ¥è¯¢è¥ä¸šçŠ¶æ€   ğŸ§° å…³é”®æŠ€æœ¯ &#x2F; ç±»   ç±»å‹ åç§° è¯´æ˜    æ§åˆ¶å±‚     ä¸šåŠ¡å±‚     å·¥å…·ç±»     æŠ€æœ¯æ ˆ      ğŸ”„ å®ç°æµç¨‹1.2.3.4.   ğŸ“˜ å­¦åˆ°çš„çŸ¥è¯†-  ğŸ—‚ï¸ å…³è”æ–‡ä»¶12sky-server/src/main/java/com/sky/controller/admin/ShopController.java/service/   ğŸ ä¸€å¥è¯å¤ç›˜   </div></div></div></a></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info text-center"><div class="avatar-img"><img src="/img/Lin.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info-name">Lin</div><div class="author-info-description">åšå¯¹çš„äº‹ï¼Œä»»ä½•æ—¶æœºéƒ½æ˜¯å¥½æ—¶æœºã€‚</div><div class="site-data"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length-num">25</div></a><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length-num">8</div></a><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length-num">3</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Lin-sist?tab=repositories"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons"><a class="social-icon" href="https://github.com/Lin-sist/Lin-sist.github.io" target="_blank" title="Github"><i class="fab fa-github" style="color: #6A5ACD;"></i></a><a class="social-icon" href="https://mail.qq.com/" target="_blank" title="Email"><i class="fas fa-envelope" style="color: #4a7dbe;"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>å…¬å‘Š</span></div><div class="announcement_content">æˆ‘æ€æ•…æˆ‘åœ¨ã€‚</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>ç›®å½•</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%93%9A-%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96-%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0%E6%80%BB%E7%BB%93"><span class="toc-number">1.</span> <span class="toc-text">ğŸ“š è‹ç©¹å¤–å– - å­¦ä¹ ç¬”è®°æ€»ç»“</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%9A%E7%BC%93%E5%AD%98%E6%A8%A1%E5%9D%97"><span class="toc-number">2.</span> <span class="toc-text">ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼“å­˜æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-1-%E4%B8%BA%E4%BB%80%E4%B9%88%E9%9C%80%E8%A6%81%E7%BC%93%E5%AD%98%EF%BC%9F"><span class="toc-number">2.1.</span> <span class="toc-text">1.1 ä¸ºä»€ä¹ˆéœ€è¦ç¼“å­˜ï¼Ÿ</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-2-%E6%96%B9%E5%BC%8F%E4%B8%80%EF%BC%9A%E6%89%8B%E5%8A%A8%E6%93%8D%E4%BD%9C-RedisTemplate%EF%BC%88%E8%8F%9C%E5%93%81%E6%A8%A1%E5%9D%97%EF%BC%89"><span class="toc-number">2.2.</span> <span class="toc-text">1.2 æ–¹å¼ä¸€ï¼šæ‰‹åŠ¨æ“ä½œ RedisTemplateï¼ˆèœå“æ¨¡å—ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8D-%E4%BB%A3%E7%A0%81%E4%BD%8D%E7%BD%AE"><span class="toc-number">2.2.1.</span> <span class="toc-text">ğŸ“ ä»£ç ä½ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8B-%E6%A0%B8%E5%BF%83%E9%80%BB%E8%BE%91"><span class="toc-number">2.2.2.</span> <span class="toc-text">ğŸ“‹ æ ¸å¿ƒé€»è¾‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%92%BB-%E5%85%B3%E9%94%AE%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5"><span class="toc-number">2.2.3.</span> <span class="toc-text">ğŸ’» å…³é”®ä»£ç ç‰‡æ®µ</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-3-%E6%96%B9%E5%BC%8F%E4%BA%8C%EF%BC%9ASpring-Cache-%E6%B3%A8%E8%A7%A3%EF%BC%88%E5%A5%97%E9%A4%90%E6%A8%A1%E5%9D%97%EF%BC%89"><span class="toc-number">2.3.</span> <span class="toc-text">1.3 æ–¹å¼äºŒï¼šSpring Cache æ³¨è§£ï¼ˆå¥—é¤æ¨¡å—ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8D-%E4%BB%A3%E7%A0%81%E4%BD%8D%E7%BD%AE-1"><span class="toc-number">2.3.1.</span> <span class="toc-text">ğŸ“ ä»£ç ä½ç½®</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8B-%E4%B8%89%E5%A4%A7%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3"><span class="toc-number">2.3.2.</span> <span class="toc-text">ğŸ“‹ ä¸‰å¤§æ ¸å¿ƒæ³¨è§£</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8B-%E5%8F%82%E6%95%B0%E8%AF%A6%E8%A7%A3"><span class="toc-number">2.3.3.</span> <span class="toc-text">ğŸ“‹ å‚æ•°è¯¦è§£</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-4-%E4%B8%A4%E7%A7%8D%E6%96%B9%E5%BC%8F%E5%AF%B9%E6%AF%94"><span class="toc-number">2.4.</span> <span class="toc-text">1.4 ä¸¤ç§æ–¹å¼å¯¹æ¯”</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#1-5-%E7%BC%93%E5%AD%98%E6%A8%A1%E5%9D%97-%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93"><span class="toc-number">2.5.</span> <span class="toc-text">1.5 ç¼“å­˜æ¨¡å— - é¢è¯•é¢˜åº“</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E7%A1%80%E9%A2%98"><span class="toc-number">2.5.1.</span> <span class="toc-text">åŸºç¡€é¢˜</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9B%E9%98%B6%E8%BF%BD%E9%97%AE"><span class="toc-number">2.5.2.</span> <span class="toc-text">è¿›é˜¶è¿½é—®</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86%EF%BC%9A%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%A8%A1%E5%9D%97"><span class="toc-number">3.</span> <span class="toc-text">ç¬¬äºŒéƒ¨åˆ†ï¼šè´­ç‰©è½¦æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#2-1-%E6%A8%A1%E5%9D%97%E7%BB%93%E6%9E%84"><span class="toc-number">3.1.</span> <span class="toc-text">2.1 æ¨¡å—ç»“æ„</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-2-%E5%9B%9B%E5%A4%A7%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD"><span class="toc-number">3.2.</span> <span class="toc-text">2.2 å››å¤§æ ¸å¿ƒåŠŸèƒ½</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-3-%E6%B7%BB%E5%8A%A0%E8%B4%AD%E7%89%A9%E8%BD%A6-%E8%AF%A6%E7%BB%86%E6%B5%81%E7%A8%8B"><span class="toc-number">3.3.</span> <span class="toc-text">2.3 æ·»åŠ è´­ç‰©è½¦ - è¯¦ç»†æµç¨‹</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-4-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">3.4.</span> <span class="toc-text">2.4 æ•°æ®åº“è®¾è®¡</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-5-%E5%85%B3%E9%94%AE%E6%8A%80%E6%9C%AF%E7%82%B9"><span class="toc-number">3.5.</span> <span class="toc-text">2.5 å…³é”®æŠ€æœ¯ç‚¹</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%94%90-%E7%94%A8%E6%88%B7%E9%9A%94%E7%A6%BB-ThreadLocal"><span class="toc-number">3.5.1.</span> <span class="toc-text">ğŸ” ç”¨æˆ·éš”ç¦» - ThreadLocal</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%8D%BD%EF%B8%8F-%E5%8F%A3%E5%91%B3%E5%8C%BA%E5%88%86"><span class="toc-number">3.5.2.</span> <span class="toc-text">ğŸ½ï¸ å£å‘³åŒºåˆ†</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-6-%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%A8%A1%E5%9D%97-%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93"><span class="toc-number">3.6.</span> <span class="toc-text">2.6 è´­ç‰©è½¦æ¨¡å— - é¢è¯•é¢˜åº“</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86%EF%BC%9A%E6%B3%A8%E8%A7%A3%E9%80%9F%E6%9F%A5%E8%A1%A8"><span class="toc-number">4.</span> <span class="toc-text">ç¬¬ä¸‰éƒ¨åˆ†ï¼šæ³¨è§£é€ŸæŸ¥è¡¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Spring-%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3"><span class="toc-number">4.1.</span> <span class="toc-text">Spring æ ¸å¿ƒæ³¨è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Lombok-%E6%B3%A8%E8%A7%A3"><span class="toc-number">4.2.</span> <span class="toc-text">Lombok æ³¨è§£</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Swagger-%E6%B3%A8%E8%A7%A3"><span class="toc-number">4.3.</span> <span class="toc-text">Swagger æ³¨è§£</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E7%AC%AC%E5%9B%9B%E9%83%A8%E5%88%86%EF%BC%9A%E5%BE%85%E5%AD%A6%E4%B9%A0%E6%B8%85%E5%8D%95"><span class="toc-number">5.</span> <span class="toc-text">ç¬¬å››éƒ¨åˆ†ï¼šå¾…å­¦ä¹ æ¸…å•</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%9D-%E5%A4%8D%E4%B9%A0%E5%BB%BA%E8%AE%AE"><span class="toc-number">5.1.</span> <span class="toc-text">ğŸ“ å¤ä¹ å»ºè®®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A4%94-%E9%A2%84%E6%B5%8B%E4%B8%80%EF%BC%9ARedisTemplate-%E7%9A%84%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2%E7%9C%8B%E4%B8%8D%E6%87%82"><span class="toc-number">5.2.</span> <span class="toc-text">ğŸ¤” é¢„æµ‹ä¸€ï¼šRedisTemplate çš„ç±»å‹è½¬æ¢çœ‹ä¸æ‡‚</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%A0%E5%8F%AF%E8%83%BD%E7%9A%84%E5%9B%B0%E6%83%91"><span class="toc-number">5.2.1.</span> <span class="toc-text">ä½ å¯èƒ½çš„å›°æƒ‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E8%A7%A3%E7%AD%94"><span class="toc-number">5.2.2.</span> <span class="toc-text">è¯¦ç»†è§£ç­”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A4%94-%E9%A2%84%E6%B5%8B%E4%BA%8C%EF%BC%9ABaseContext-getCurrentId-%E5%88%B0%E5%BA%95%E6%80%8E%E4%B9%88%E6%9D%A5%E7%9A%84%EF%BC%9F"><span class="toc-number">5.3.</span> <span class="toc-text">ğŸ¤” é¢„æµ‹äºŒï¼šBaseContext.getCurrentId() åˆ°åº•æ€ä¹ˆæ¥çš„ï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%A0%E5%8F%AF%E8%83%BD%E7%9A%84%E5%9B%B0%E6%83%91-1"><span class="toc-number">5.3.1.</span> <span class="toc-text">ä½ å¯èƒ½çš„å›°æƒ‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E8%A7%A3%E7%AD%94-1"><span class="toc-number">5.3.2.</span> <span class="toc-text">è¯¦ç»†è§£ç­”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81%E8%A7%A3%E8%AF%BB"><span class="toc-number">5.3.3.</span> <span class="toc-text">æ ¸å¿ƒä»£ç è§£è¯»</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ThreadLocal-%E9%80%9A%E4%BF%97%E7%90%86%E8%A7%A3"><span class="toc-number">5.3.4.</span> <span class="toc-text">ThreadLocal é€šä¿—ç†è§£</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A4%94-%E9%A2%84%E6%B5%8B%E4%B8%89%EF%BC%9ABeanUtils-copyProperties-%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">5.4.</span> <span class="toc-text">ğŸ¤” é¢„æµ‹ä¸‰ï¼šBeanUtils.copyProperties æ˜¯ä»€ä¹ˆï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%A0%E5%8F%AF%E8%83%BD%E7%9A%84%E5%9B%B0%E6%83%91-2"><span class="toc-number">5.4.1.</span> <span class="toc-text">ä½ å¯èƒ½çš„å›°æƒ‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E8%A7%A3%E7%AD%94-2"><span class="toc-number">5.4.2.</span> <span class="toc-text">è¯¦ç»†è§£ç­”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A4%94-%E9%A2%84%E6%B5%8B%E5%9B%9B%EF%BC%9A%E5%8A%A8%E6%80%81SQL%E7%9A%84-%E6%A0%87%E7%AD%BE"><span class="toc-number">5.5.</span> <span class="toc-text">ğŸ¤” é¢„æµ‹å››ï¼šåŠ¨æ€SQLçš„ &lt;where&gt; æ ‡ç­¾</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%A0%E5%8F%AF%E8%83%BD%E7%9A%84%E5%9B%B0%E6%83%91-3"><span class="toc-number">5.5.1.</span> <span class="toc-text">ä½ å¯èƒ½çš„å›°æƒ‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E8%A7%A3%E7%AD%94-3"><span class="toc-number">5.5.2.</span> <span class="toc-text">è¯¦ç»†è§£ç­”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A4%94-%E9%A2%84%E6%B5%8B%E4%BA%94%EF%BC%9ASpring-Cache-%E7%9A%84%E7%BC%93%E5%AD%98%E5%88%B0%E5%BA%95%E5%AD%98%E5%9C%A8%E5%93%AA%E9%87%8C%EF%BC%9F"><span class="toc-number">5.6.</span> <span class="toc-text">ğŸ¤” é¢„æµ‹äº”ï¼šSpring Cache çš„ç¼“å­˜åˆ°åº•å­˜åœ¨å“ªé‡Œï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%A0%E5%8F%AF%E8%83%BD%E7%9A%84%E5%9B%B0%E6%83%91-4"><span class="toc-number">5.6.1.</span> <span class="toc-text">ä½ å¯èƒ½çš„å›°æƒ‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E8%A7%A3%E7%AD%94-4"><span class="toc-number">5.6.2.</span> <span class="toc-text">è¯¦ç»†è§£ç­”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A4%94-%E9%A2%84%E6%B5%8B%E5%85%AD%EF%BC%9A%E4%B8%BA%E4%BB%80%E4%B9%88%E6%9F%A5%E8%AF%A2%E7%94%A8%E5%AF%B9%E8%B1%A1%E8%80%8C%E4%B8%8D%E6%98%AF%E7%9B%B4%E6%8E%A5%E4%BC%A0%E5%8F%82%E6%95%B0%EF%BC%9F"><span class="toc-number">5.7.</span> <span class="toc-text">ğŸ¤” é¢„æµ‹å…­ï¼šä¸ºä»€ä¹ˆæŸ¥è¯¢ç”¨å¯¹è±¡è€Œä¸æ˜¯ç›´æ¥ä¼ å‚æ•°ï¼Ÿ</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%A0%E5%8F%AF%E8%83%BD%E7%9A%84%E5%9B%B0%E6%83%91-5"><span class="toc-number">5.7.1.</span> <span class="toc-text">ä½ å¯èƒ½çš„å›°æƒ‘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AF%A6%E7%BB%86%E8%A7%A3%E7%AD%94-5"><span class="toc-number">5.7.2.</span> <span class="toc-text">è¯¦ç»†è§£ç­”</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%A4%94-%E9%A2%84%E6%B5%8B%E4%B8%83%EF%BC%9A%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E5%87%BB%E7%A9%BF%E3%80%81%E9%9B%AA%E5%B4%A9%EF%BC%88%E9%9D%A2%E8%AF%95%E5%BF%85%E9%97%AE%E4%BD%86%E4%BD%A0%E5%8F%AF%E8%83%BD%E6%B2%A1%E6%A6%82%E5%BF%B5%EF%BC%89"><span class="toc-number">5.8.</span> <span class="toc-text">ğŸ¤” é¢„æµ‹ä¸ƒï¼šç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©ï¼ˆé¢è¯•å¿…é—®ä½†ä½ å¯èƒ½æ²¡æ¦‚å¿µï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8A-%E4%B8%89%E5%A4%A7%E7%BC%93%E5%AD%98%E9%97%AE%E9%A2%98%E5%AF%B9%E6%AF%94"><span class="toc-number">5.8.1.</span> <span class="toc-text">ğŸ“Š ä¸‰å¤§ç¼“å­˜é—®é¢˜å¯¹æ¯”</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%BE%E8%A7%A3"><span class="toc-number">5.8.2.</span> <span class="toc-text">å›¾è§£</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%9D-%E7%9F%A5%E8%AF%86%E7%82%B9%E8%87%AA%E6%A3%80%E6%B8%85%E5%8D%95"><span class="toc-number">5.9.</span> <span class="toc-text">ğŸ“ çŸ¥è¯†ç‚¹è‡ªæ£€æ¸…å•</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%F0%9F%8E%AF-%E8%8B%8D%E7%A9%B9%E5%A4%96%E5%8D%96-%E7%BC%93%E5%AD%98-%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%A8%A1%E5%9D%97%E9%9D%A2%E8%AF%95%E9%A2%98%E5%BA%93"><span class="toc-number">6.</span> <span class="toc-text">ğŸ¯ è‹ç©¹å¤–å– - ç¼“å­˜&amp;è´­ç‰©è½¦æ¨¡å—é¢è¯•é¢˜åº“</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%80%E9%83%A8%E5%88%86%EF%BC%9A%E7%BC%93%E5%AD%98%E6%A8%A1%E5%9D%97-1"><span class="toc-number">6.1.</span> <span class="toc-text">ç¬¬ä¸€éƒ¨åˆ†ï¼šç¼“å­˜æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8B-Level-1%EF%BC%9A%E5%9F%BA%E7%A1%80%E9%97%AE%E9%A2%98%EF%BC%88%E5%BF%85%E9%A1%BB%E7%AD%94%E4%B8%8A%E6%9D%A5%EF%BC%89"><span class="toc-number">6.1.1.</span> <span class="toc-text">ğŸ“‹ Level 1ï¼šåŸºç¡€é—®é¢˜ï¼ˆå¿…é¡»ç­”ä¸Šæ¥ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Q1-%E4%BD%A0%E9%A1%B9%E7%9B%AE%E4%B8%AD-Redis-%E6%98%AF%E6%80%8E%E4%B9%88%E7%94%A8%E7%9A%84%EF%BC%9F"><span class="toc-number">6.1.1.1.</span> <span class="toc-text">Q1: ä½ é¡¹ç›®ä¸­ Redis æ˜¯æ€ä¹ˆç”¨çš„ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q2-%E4%BD%A0%E7%94%A8%E7%9A%84%E4%BB%80%E4%B9%88%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84%E5%AD%98%E5%82%A8%E7%BC%93%E5%AD%98%EF%BC%9FKey-%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1%E7%9A%84%EF%BC%9F"><span class="toc-number">6.1.1.2.</span> <span class="toc-text">Q2: ä½ ç”¨çš„ä»€ä¹ˆæ•°æ®ç»“æ„å­˜å‚¨ç¼“å­˜ï¼ŸKey æ€ä¹ˆè®¾è®¡çš„ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q3-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%94%A8%E4%BA%86%E4%B8%A4%E7%A7%8D%E7%BC%93%E5%AD%98%E6%96%B9%E5%BC%8F%EF%BC%8C%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.1.1.3.</span> <span class="toc-text">Q3: é¡¹ç›®ä¸­ç”¨äº†ä¸¤ç§ç¼“å­˜æ–¹å¼ï¼Œæœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8B-Level-2%EF%BC%9A%E8%BF%9B%E9%98%B6%E8%BF%BD%E9%97%AE%EF%BC%88%E5%8C%BA%E5%88%86%E5%BA%A6%E9%97%AE%E9%A2%98%EF%BC%89"><span class="toc-number">6.1.2.</span> <span class="toc-text">ğŸ“‹ Level 2ï¼šè¿›é˜¶è¿½é—®ï¼ˆåŒºåˆ†åº¦é—®é¢˜ï¼‰</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Q4-%E5%A6%82%E6%9E%9C%E7%AE%A1%E7%90%86%E5%91%98%E4%BF%AE%E6%94%B9%E4%BA%86%E8%8F%9C%E5%93%81%EF%BC%8C%E7%BC%93%E5%AD%98%E9%87%8C%E7%9A%84%E6%95%B0%E6%8D%AE%E4%B8%8D%E5%B0%B1%E6%98%AF%E6%97%A7%E7%9A%84%E5%90%97%EF%BC%9F%E6%80%8E%E4%B9%88%E5%A4%84%E7%90%86%E7%9A%84%EF%BC%9F"><span class="toc-number">6.1.2.1.</span> <span class="toc-text">Q4: å¦‚æœç®¡ç†å‘˜ä¿®æ”¹äº†èœå“ï¼Œç¼“å­˜é‡Œçš„æ•°æ®ä¸å°±æ˜¯æ—§çš„å—ï¼Ÿæ€ä¹ˆå¤„ç†çš„ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q5-%E4%BD%A0%E4%BA%86%E8%A7%A3%E7%BC%93%E5%AD%98%E7%A9%BF%E9%80%8F%E3%80%81%E5%87%BB%E7%A9%BF%E3%80%81%E9%9B%AA%E5%B4%A9%E5%90%97%EF%BC%9F%E4%BD%A0%E9%A1%B9%E7%9B%AE%E9%87%8C%E6%9C%89%E5%A4%84%E7%90%86%E5%90%97%EF%BC%9F"><span class="toc-number">6.1.2.2.</span> <span class="toc-text">Q5: ä½ äº†è§£ç¼“å­˜ç©¿é€ã€å‡»ç©¿ã€é›ªå´©å—ï¼Ÿä½ é¡¹ç›®é‡Œæœ‰å¤„ç†å—ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q6-Spring-Cache-%E7%9A%84%E5%8E%9F%E7%90%86%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F%E6%9C%89%E4%BB%80%E4%B9%88%E5%9D%91%EF%BC%9F"><span class="toc-number">6.1.2.3.</span> <span class="toc-text">Q6: Spring Cache çš„åŸç†æ˜¯ä»€ä¹ˆï¼Ÿæœ‰ä»€ä¹ˆå‘ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q7-%E5%A6%82%E6%9E%9C%E8%AE%A9%E4%BD%A0%E4%BC%98%E5%8C%96%E8%BF%99%E4%B8%AA%E7%BC%93%E5%AD%98%E6%96%B9%E6%A1%88%EF%BC%8C%E4%BD%A0%E4%BC%9A%E6%80%8E%E4%B9%88%E5%81%9A%EF%BC%9F"><span class="toc-number">6.1.2.4.</span> <span class="toc-text">Q7: å¦‚æœè®©ä½ ä¼˜åŒ–è¿™ä¸ªç¼“å­˜æ–¹æ¡ˆï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%BA%8C%E9%83%A8%E5%88%86%EF%BC%9A%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%A8%A1%E5%9D%97-1"><span class="toc-number">6.2.</span> <span class="toc-text">ç¬¬äºŒéƒ¨åˆ†ï¼šè´­ç‰©è½¦æ¨¡å—</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8B-Level-1%EF%BC%9A%E5%9F%BA%E7%A1%80%E9%97%AE%E9%A2%98"><span class="toc-number">6.2.1.</span> <span class="toc-text">ğŸ“‹ Level 1ï¼šåŸºç¡€é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Q8-%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%9A%84%E6%A0%B8%E5%BF%83%E5%8A%9F%E8%83%BD%E6%9C%89%E5%93%AA%E4%BA%9B%EF%BC%9F%E6%95%B0%E6%8D%AE%E5%AD%98%E5%9C%A8%E5%93%AA%E9%87%8C%EF%BC%9F"><span class="toc-number">6.2.1.1.</span> <span class="toc-text">Q8: è´­ç‰©è½¦çš„æ ¸å¿ƒåŠŸèƒ½æœ‰å“ªäº›ï¼Ÿæ•°æ®å­˜åœ¨å“ªé‡Œï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q9-%E6%B7%BB%E5%8A%A0%E8%B4%AD%E7%89%A9%E8%BD%A6%E7%9A%84%E6%A0%B8%E5%BF%83%E9%80%BB%E8%BE%91%E6%98%AF%E4%BB%80%E4%B9%88%EF%BC%9F"><span class="toc-number">6.2.1.2.</span> <span class="toc-text">Q9: æ·»åŠ è´­ç‰©è½¦çš„æ ¸å¿ƒé€»è¾‘æ˜¯ä»€ä¹ˆï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q10-BaseContext-getCurrentId-%E6%98%AF%E6%80%8E%E4%B9%88%E5%AE%9E%E7%8E%B0%E7%9A%84%EF%BC%9F"><span class="toc-number">6.2.1.3.</span> <span class="toc-text">Q10: BaseContext.getCurrentId() æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%F0%9F%93%8B-Level-2%EF%BC%9A%E8%BF%9B%E9%98%B6%E8%BF%BD%E9%97%AE"><span class="toc-number">6.2.2.</span> <span class="toc-text">ğŸ“‹ Level 2ï¼šè¿›é˜¶è¿½é—®</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Q11-ThreadLocal-%E4%BC%9A%E6%9C%89%E5%86%85%E5%AD%98%E6%B3%84%E6%BC%8F%E9%97%AE%E9%A2%98%E5%90%97%EF%BC%9F%E6%80%8E%E4%B9%88%E8%A7%A3%E5%86%B3%EF%BC%9F"><span class="toc-number">6.2.2.1.</span> <span class="toc-text">Q11: ThreadLocal ä¼šæœ‰å†…å­˜æ³„æ¼é—®é¢˜å—ï¼Ÿæ€ä¹ˆè§£å†³ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q12-%E5%90%8C%E4%B8%80%E8%8F%9C%E5%93%81%E4%B8%8D%E5%90%8C%E5%8F%A3%E5%91%B3%E6%80%8E%E4%B9%88%E5%8C%BA%E5%88%86%E7%9A%84%EF%BC%9F"><span class="toc-number">6.2.2.2.</span> <span class="toc-text">Q12: åŒä¸€èœå“ä¸åŒå£å‘³æ€ä¹ˆåŒºåˆ†çš„ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q13-%E8%B4%AD%E7%89%A9%E8%BD%A6%E8%A1%A8%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81%E5%86%97%E4%BD%99%E5%AD%98%E5%82%A8-name%E3%80%81image%E3%80%81amount%EF%BC%9F"><span class="toc-number">6.2.2.3.</span> <span class="toc-text">Q13: è´­ç‰©è½¦è¡¨ä¸ºä»€ä¹ˆè¦å†—ä½™å­˜å‚¨ nameã€imageã€amountï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q14-%E5%A6%82%E6%9E%9C%E7%94%A8-Redis-%E5%AD%98%E8%B4%AD%E7%89%A9%E8%BD%A6%EF%BC%8C%E4%BD%A0%E4%BC%9A%E6%80%8E%E4%B9%88%E8%AE%BE%E8%AE%A1%EF%BC%9F"><span class="toc-number">6.2.2.4.</span> <span class="toc-text">Q14: å¦‚æœç”¨ Redis å­˜è´­ç‰©è½¦ï¼Œä½ ä¼šæ€ä¹ˆè®¾è®¡ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q15-%E6%B7%BB%E5%8A%A0%E8%B4%AD%E7%89%A9%E8%BD%A6%E6%9C%89%E5%B9%B6%E5%8F%91%E9%97%AE%E9%A2%98%E5%90%97%EF%BC%9F%E6%AF%94%E5%A6%82%E7%94%A8%E6%88%B7%E5%BF%AB%E9%80%9F%E7%82%B9%E5%87%BB%E4%B8%A4%E6%AC%A1%EF%BC%9F"><span class="toc-number">6.2.2.5.</span> <span class="toc-text">Q15: æ·»åŠ è´­ç‰©è½¦æœ‰å¹¶å‘é—®é¢˜å—ï¼Ÿæ¯”å¦‚ç”¨æˆ·å¿«é€Ÿç‚¹å‡»ä¸¤æ¬¡ï¼Ÿ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AC%AC%E4%B8%89%E9%83%A8%E5%88%86%EF%BC%9A%E7%BB%BC%E5%90%88%E6%89%A9%E5%B1%95%E9%97%AE%E9%A2%98"><span class="toc-number">6.3.</span> <span class="toc-text">ç¬¬ä¸‰éƒ¨åˆ†ï¼šç»¼åˆæ‰©å±•é—®é¢˜</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Q16-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%94%A8%E4%BA%86%E5%93%AA%E4%BA%9B%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%EF%BC%9F"><span class="toc-number">6.3.0.1.</span> <span class="toc-text">Q16: é¡¹ç›®ä¸­ç”¨äº†å“ªäº›è®¾è®¡æ¨¡å¼ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q17-%E9%A1%B9%E7%9B%AE%E4%B8%AD%E7%9A%84-DTO%E3%80%81VO%E3%80%81Entity-%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB%EF%BC%9F"><span class="toc-number">6.3.0.2.</span> <span class="toc-text">Q17: é¡¹ç›®ä¸­çš„ DTOã€VOã€Entity æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Q18-%E5%A6%82%E6%9E%9C%E8%AE%A9%E4%BD%A0%E5%81%9A%E8%BF%99%E4%B8%AA%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%EF%BC%8C%E4%BD%A0%E4%BC%9A%E6%80%8E%E4%B9%88%E5%81%9A%EF%BC%9F"><span class="toc-number">6.3.0.3.</span> <span class="toc-text">Q18: å¦‚æœè®©ä½ åšè¿™ä¸ªé¡¹ç›®çš„æ€§èƒ½ä¼˜åŒ–ï¼Œä½ ä¼šæ€ä¹ˆåšï¼Ÿ</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%F0%9F%93%9D-%E9%9D%A2%E8%AF%95%E6%A8%A1%E6%8B%9F-%E8%BF%9E%E7%8E%AF%E8%BF%BD%E9%97%AE"><span class="toc-number">6.4.</span> <span class="toc-text">ğŸ“ é¢è¯•æ¨¡æ‹Ÿ - è¿ç¯è¿½é—®</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E2%9C%85-%E8%87%AA%E6%A3%80%E6%B8%85%E5%8D%95"><span class="toc-number">6.5.</span> <span class="toc-text">âœ… è‡ªæ£€æ¸…å•</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>æœ€æ–°æ–‡ç« </span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/31/Day08-01%E5%88%B011%E3%80%8A%E7%94%A8%E6%88%B7%E4%B8%8B%E5%8D%95%E3%80%8B/" title="Day08-01åˆ°11ã€Šç”¨æˆ·ä¸‹å•ã€‹">Day08-01åˆ°11ã€Šç”¨æˆ·ä¸‹å•ã€‹</a><time datetime="2026-01-30T16:00:00.000Z" title="å‘è¡¨äº 2026-01-31 00:00:00">2026-01-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/31/Day08-12%E5%88%B018%E3%80%8A%E8%AE%A2%E5%8D%95%E6%94%AF%E4%BB%98%E3%80%8B/" title="Day08-12åˆ°18ã€Šè®¢å•æ”¯ä»˜ã€‹">Day08-12åˆ°18ã€Šè®¢å•æ”¯ä»˜ã€‹</a><time datetime="2026-01-30T16:00:00.000Z" title="å‘è¡¨äº 2026-01-31 00:00:00">2026-01-31</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/29/Day07%E6%80%BB%E7%BB%93/" title="Day07-13åˆ°19ã€Šè´­ç‰©è½¦åŠŸèƒ½ã€‹">Day07-13åˆ°19ã€Šè´­ç‰©è½¦åŠŸèƒ½ã€‹</a><time datetime="2026-01-28T16:00:00.000Z" title="å‘è¡¨äº 2026-01-29 00:00:00">2026-01-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/29/Day07-01%E5%88%B012%E3%80%8A%E7%BC%93%E5%AD%98%E5%8A%9F%E8%83%BD%E3%80%8B/" title="Day07-01åˆ°12ã€Šç¼“å­˜åŠŸèƒ½ã€‹">Day07-01åˆ°12ã€Šç¼“å­˜åŠŸèƒ½ã€‹</a><time datetime="2026-01-28T16:00:00.000Z" title="å‘è¡¨äº 2026-01-29 00:00:00">2026-01-29</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2026/01/29/Day07-13%E5%88%B019%E3%80%8A%E8%B4%AD%E7%89%A9%E8%BD%A6%E5%8A%9F%E8%83%BD%E3%80%8B/" title="Day07-13åˆ°19ã€Šè´­ç‰©è½¦åŠŸèƒ½ã€‹">Day07-13åˆ°19ã€Šè´­ç‰©è½¦åŠŸèƒ½ã€‹</a><time datetime="2026-01-28T16:00:00.000Z" title="å‘è¡¨äº 2026-01-29 00:00:00">2026-01-29</time></div></div></div></div></div></div></main><footer id="footer" style="background-image: url(/img/YourName.jpg);"><div class="footer-other"><div class="footer-copyright"><span class="copyright">&copy;&nbsp;2025 - 2026 By Lin</span><span class="framework-info"><span>æ¡†æ¶ </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo 7.3.0</a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly 5.4.3</a></span></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="é˜…è¯»æ¨¡å¼"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="æ—¥é—´å’Œå¤œé—´æ¨¡å¼åˆ‡æ¢"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="å•æ å’ŒåŒæ åˆ‡æ¢"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="è®¾ç½®"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="ç›®å½•"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="å›åˆ°é¡¶éƒ¨"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><div class="js-pjax"></div><script>(() => {
  window.ChatraID = ''
  window.Chatra = window.Chatra || function() {
    (window.Chatra.q = window.Chatra.q || []).push(arguments)
  }

  btf.getScript('https://call.chatra.io/chatra.js').then(() => {
    const isChatBtn = false
    const isChatHideShow = false

    if (isChatBtn) {
      const close = () => {
        Chatra('minimizeWidget')
        Chatra('hide')
      }

      const open = () => {
        Chatra('openChat', true)
        Chatra('show')
      }

      window.ChatraSetup = { startHidden: true }
    
      window.chatBtnFn = () => document.getElementById('chatra').classList.contains('chatra--expanded') ? close() : open()

      document.getElementById('chat-btn').style.display = 'block'
    } else if (isChatHideShow) {
      window.chatBtn = {
        hide: () => Chatra('hide'),
        show: () => Chatra('show')
      }
    }
  })
})()</script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>